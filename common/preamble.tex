\usepackage[utf8]{inputenc}

\usepackage{graphicx} % support the \includegraphics command and options

\usepackage{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\ifdefined\BEAMER
\else
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)\prefix\t$.
\fi
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\ifdefined\BEAMER
\else
\ifdefined\THESIS
\usepackage{subcaption}
\else
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
\fi
\fi
\usepackage{mathtools} % for the all important \coloneqq symbol
\usepackage{hyperref} % for hyperreferences
\usepackage{IEEEtrantools} % for \IEEEeqnarray
\usepackage{pbox} % for \pbox
\usepackage{multirow,bigdelim} % for \multirow
\usepackage{lettrine} % For the drop cap
\usepackage{mathpartir} % for \inferrule, \inferrule* and the mathpar environment
\usepackage{listings}

\usepackage{caption}
\captionsetup{singlelinecheck=off}

\ifdefined\NOTARTICLE
\else

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

\fi

%% Font things %%
\usepackage{amssymb}
\usepackage{cmll} % Linear logic symbols!
\ifdefined\FEWFONTS
\else
\usepackage{bm} % for bold Greek letters
\fi
\usepackage{stmaryrd}
\usepackage{bbm}

%% Get the sqsubsetneqq character from the mathabx package
\DeclareFontFamily{U}{mathb}{\hyphenchar\font45}
\DeclareFontShape{U}{mathb}{m}{n}{
      <5> <6> <7> <8> <9> <10> gen * mathb
      <10.95> mathb10 <12> <14.4> <17.28> <20.74> <24.88> mathb12
      }{}
\DeclareSymbolFont{mathb}{U}{mathb}{m}{n}

\DeclareMathSymbol{\sqsubsetneq}    {3}{mathb}{"88}
\DeclareMathSymbol{\varsqsubsetneq} {3}{mathb}{"8A}
\DeclareMathSymbol{\varsqsubsetneqq}{3}{mathb}{"92}
\DeclareMathSymbol{\sqsubsetneqq}   {3}{mathb}{"90}

%% Get the left and right moons from the wasysym package

\DeclareFontFamily{U}{wasy}{}
\DeclareFontShape{U}{wasy}{m}{n}{ <5> <6> <7> <8> <9> gen * wasy
      <10> <10.95> <12> <14.4> <17.28> <20.74> <24.88>wasy10  }{}
\DeclareFontShape{U}{wasy}{b}{n}{ <-10> sub * wasy/m/n
 <10> <10.95> <12> <14.4> <17.28> <20.74> <24.88>wasyb10 }{}
\DeclareFontShape{U}{wasy}{bx}{n}{ <-> sub * wasy/b/n}{}

\def\wasyfamily{\fontencoding{U}\fontfamily{wasy}\selectfont}
\def\leftmoon   {\mbox{\wasyfamily\char36}}
\def\rightmoon  {\mbox{\wasyfamily\char37}}

%% Lists %%
\usepackage{enumerate}

%% Graphics %%
\usepackage{tikz}
\usetikzlibrary{cd}
\usetikzlibrary{patterns}
\usetikzlibrary{calc}
\usetikzlibrary{decorations.pathmorphing}
\usetikzlibrary{positioning}

\tikzset{inlinearrows/.style={anchor=base,baseline,x=0.6\baselineskip,y=0.6\baselineskip}}

\ifdefined\BEAMER
\else

%% Theorems! %%
\usepackage{amsthm}
\theoremstyle{plain} % Theorems, lemmas, propositions etc.
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{construction}[theorem]{Construction}
\theoremstyle{definition} % Definitions etc.  
\newtheorem{definition}[theorem]{Definition}
\newtheorem{notation}[theorem]{Notation}
\theoremstyle{remark} % Remarks
\newtheorem{remark}[theorem]{Remark}
\newtheorem{remarks}[theorem]{Remarks}
\newtheorem{example}[theorem]{Example}
\newtheorem{question}[theorem]{Question}
\newtheorem{slogan}[theorem]{Slogan}

\newtheoremstyle{note} {3pt} {3pt} {\itshape} {} {\itshape} {:} {.5em} {} % For short notes
\theoremstyle{note}
\newtheorem{note}[theorem]{Note}

\fi

%% Exercises and answers %%
\usepackage{answers}

\newtheoremstyle{exercisestyle}% name
  {6pt}   % ABOVESPACE
  {6pt}   % BELOWSPACE
  {\itshape}  % BODYFONT
  {0pt}       % INDENT (empty value is the same as 0pt)
  {\bfseries} % HEADFONT
  {.}         % HEADPUNCT
  {3pt} % HEADSPACE
  {}          % CUSTOM-HEAD-SPEC

\theoremstyle{exercisestyle}
\newtheorem{exercise}{Exercise}
\newtheorem{answerthm}{Exercise}

\Newassociation{answer}{answerthm}{answers}
\newcommand{\answerthmparams}{}

%% Changes to enumerate things so they look better %%\sigma$

\makeatletter
\def\enumfix{%
\if@inlabel
 \noindent \par\nobreak\vskip-\topsep\hrule\@height\z@
\fi}

\let\olditemize\itemize
\def\itemize{\enumfix\olditemize}
\let\oldenumerate\enumerate
\def\enumerate{\enumfix\oldenumerate}

%% Random crap %%
\usepackage{xifthen}

\makeatletter
\def\thm@space@setup{%
  \thm@preskip=\parskip \thm@postskip=0pt
}
\makeatother

\makeatletter
\newcommand*{\relrelbarsep}{.386ex}
\newcommand*{\relrelbar}{%
  \mathrel{%
    \mathpalette\@relrelbar\relrelbarsep
  }%
}
\newcommand*{\@relrelbar}[2]{%
  \raise#2\hbox to 0pt{$\m@th#1\relbar$\hss}%
  \lower#2\hbox{$\m@th#1\relbar$}%
}
\providecommand*{\rightrightarrowsfill@}{%
  \arrowfill@\relrelbar\relrelbar\rightrightarrows
}
\providecommand*{\leftleftarrowsfill@}{%
  \arrowfill@\leftleftarrows\relrelbar\relrelbar
}
\providecommand*{\xrightrightarrows}[2][]{%
  \ext@arrow 0359\rightrightarrowsfill@{#1}{#2}%
}
\providecommand*{\xleftleftarrows}[2][]{%
  \ext@arrow 3095\leftleftarrowsfill@{#1}{#2}%
}
\makeatother

\newcommand{\catname}[1]{{\normalfont\textbf{#1}}}
\newcommand{\Rings}{\catname{CRing}}
\newcommand{\CAT}{\catname{CAT}}
%\newcommand{\Top}{\catname{Top}}
\newcommand{\Set}{\catname{Set}}
\newcommand{\Cat}{\catname{Cat}}
\newcommand{\MonCat}{\catname{MonCat}}
\newcommand{\SymmMonCat}{\catname{SymmMonCat}}
\newcommand{\Cont}{\catname{Cont}}
\newcommand{\Sch}{\catname{Sch}}
\newcommand{\Rel}{\catname{Rel}}
\newcommand{\Coh}{\catname{Coh}}
\newcommand{\Inj}{\catname{Inj}}
\newcommand{\Dcpo}{\catname{Dcpo}}
\newcommand{\Mod}[1][]{\ifthenelse{\isempty{#1}}{\catname{Mod}}{#1\catname{mod}}}
\DeclareMathOperator{\sh}{Sh}
\newcommand{\Sh}[1][]{\ifthenelse{\isempty{#1}}{\sh}{\sh(#1)}}
\newcommand{\map}[3]{#2\xrightarrow{#1} #3}
\newcommand*\from{\colon}
\newcommand*\bigto{\Rightarrow}
\newcommand{\cmap}[3]{#1\from{}#2\to{}#3}
\newcommand\oppcat[1]{#1^{\mathrm{op}}}
\newcommand{\object}{\colon}
\DeclareRobustCommand{\vmap}[3] {\begin{tikzcd} #2 \arrow[d, "#1"] \\ #3 \end{tikzcd}}
\newcommand{\partref}[1]{(\ref{#1})}
\newcommand{\intgrpd}[4] {#1 \xrightrightarrows[#3]{#4} #2}
\DeclareRobustCommand{\bigintgrpd}[4] {\begin{tikzcd}[ampersand replacement=\&] #1 \arrow[r, shift left=0.5ex, "#3"] \arrow[r, shift right=0.5ex, "#4"'] \& #2 \end{tikzcd}}

\usepackage{xspace}

\newcommand{\etale}{\'{e}tale\xspace}
\newcommand{\Etale}{\'{E}tale\xspace}

\def \inv {^{-1}}

\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\op}{op}
\DeclareMathOperator{\pr}{pr}
\DeclareMathOperator{\inj}{in}
\DeclareMathOperator{\pre}{{pre}}
\DeclareMathOperator{\et}{{\acute{e}t}}

\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Spec}{Spec}

\DeclareMathOperator{\ol}{ol}

\def\presuper#1#2%
  {\mathop{}%
   \mathopen{\vphantom{#2}}^{#1}%
   \kern-\scriptspace%
   #2}
\def\presub#1#2%
  {\mathop{}%
   \mathopen{\vphantom{#2}}_{#1}%
   \kern-\scriptspace%
   #2}

\newsavebox{\overlongequation}
\newenvironment{longdiagram}
 {\begin{displaymath}\begin{lrbox}{\overlongequation}$\displaystyle}
 {$\end{lrbox}\makebox[0pt]{\usebox{\overlongequation}}\end{displaymath}}

%% Our things %%

\newcommand{\neggame}[1]{\presuper{\perp}{#1}}
\newcommand{\tensor}{\otimes}
\newcommand{\Tensor}{\bigotimes}
\newcommand{\sequoid}{\oslash}
\newcommand{\varsequoid}{\vartriangleleft}
\renewcommand{\implies}{\multimap}
\newcommand{\iimpl}{\Longrightarrow}
\newcommand{\comp}[2]{#1 \circ #2}
\newcommand{\icomp}[2]{\comp{#1}{#2}}
\newcommand{\cprd}{\sqcup}
\newcommand{\bigcprd}{\bigsqcup}
\newcommand{\G}{\mathcal G}
\newcommand{\W}{\mathcal W}
\newcommand{\suchthat}{\;\colon\;}
\newcommand{\varsuchthat}{\;\mid\;}
\newcommand{\esuchthat}{\;.\;}
\newcommand{\OP}{\{O,P\}}
\newcommand{\QA}{\{Q,A\}}
\renewcommand{\L}{\mathcal L}
\newcommand{\F}{\mathcal F}
\newcommand{\U}{\mathcal U}
\newcommand{\s}{\mathfrak s}
\renewcommand{\t}{\mathfrak t}
\renewcommand{\u}{\mathfrak u}
\renewcommand{\d}{\mathfrak d}
\newcommand{\e}{\mathfrak e}
\newcommand{\emptyplay}{\epsilon}
\newcommand{\bracketed}[1]{\left({#1}\right)}
\newcommand{\bneggame}[1]{{\bracketed{\neggame{#1}}}}
\newcommand{\prefix}{\sqsubseteq}
\newcommand{\ppprefix}{\sqsubset}
\newcommand{\pprefix}{\sqsubsetneqq}
\renewcommand{\ss}{\mathbf{s}}
\newcommand{\bN}{\mathbb{N}}
\newcommand{\bC}{\mathbb{C}}
\newcommand{\bB}{\mathbb{B}}
\newcommand{\bP}{\mathbb{P}}
\newcommand{\pfun}{\rightharpoonup}
\newcommand{\grel}[1]{\underline{#1}}
\DeclareMathOperator{\length}{length}
\renewcommand{\b}{\mathfrak b}
\renewcommand{\r}{\mathfrak r}
\newcommand{\bbeta}{{\bm{\beta}}}
\newcommand{\st}{{\Sigma^*}}
\let\sec\S
\renewcommand{\S}{{\mathfrak{S}}}
\DeclareMathOperator{\cc}{cc}
\DeclareMathOperator{\subs}{subs}
\DeclareMathOperator{\ret}{ret}
\DeclareMathOperator{\zz}{zz}
\newcommand{\aaa}{\mathbf{a}}
\newcommand{\bbb}{\mathbf{b}}
\newcommand{\ccc}{\mathbf{c}}
\newcommand{\ddd}{\mathbf{d}}
\newcommand{\B}{\mathcal B}
\newcommand{\BB}{\mathbf B}
\renewcommand{\H}{\mathcal H}
\DeclareMathOperator{\assoc}{assoc}
\DeclareMathOperator{\lunit}{lunit}
\DeclareMathOperator{\runit}{runit}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\sym}{sym}
\newcommand{\braid}{\sym}
\newcommand{\blank}{\,\underline{\hspace{1.5ex}}\,}
\DeclareMathOperator{\cn}{cn}
\newcommand{\impliescn}{\protect\overset{\cn}{\implies}}
\newcommand{\C}{{\mathcal{C}}}
\newcommand{\D}{{\mathcal{D}}}
\newcommand{\E}{{\mathcal{E}}}
\newcommand{\V}{{\mathcal{V}}}
\newcommand{\EE}{{\mathbf{E}}}
\DeclareMathOperator{\ev}{ev}
\newcommand{\der}{{\mathtt{der}}}
\newcommand{\mult}{{\mathtt{mult}}}
\DeclareMathOperator{\wk}{wk}
\newcommand{\toisom}{{\xrightarrow{\cong}}}
\DeclareMathOperator{\passoc}{{\mathsf{passoc}}}
\DeclareMathOperator{\pcomm}{{\mathsf{pcomm}}}
\DeclareMathOperator{\run}{{\mathsf{r}}}
\DeclareMathOperator{\lun}{{\mathsf{l}}}
\newcommand{\fcoal}[1]{{\leftmoon #1 \rightmoon}}
\DeclareMathSymbol{\co}{\mathord}{operators}{"3C}
\DeclareMathSymbol{\nw}{\mathord}{operators}{"3E}
\newcommand{\T}{\mathfrak{T}}
\renewcommand{\subset}{\subseteq}
\newcommand{\Ord}{\catname{Ord}}
\newcommand{\FS}{\mathcal{FS}}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\dist}{{\mathsf{dist}}}
\DeclareMathOperator{\dec}{{\mathsf{dec}}}
\DeclareMathOperator{\str}{str}
\DeclareMathOperator{\weak}{weak}
\DeclareMathOperator{\Strat}{Strat}
\DeclareMathOperator{\OppStrat}{OppStrat}
\newcommand{\seqs}[1]{{\overline{{#1}^{*}}}}
\def\flushRight{\leftskip0pt plus 1fill\rightskip0pt}
\def\Centering{\relax\ifvmode\centering\fi}
\newcommand{\deno}[1]{\left\llbracket#1\right\rrbracket}
\newcommand{\converges}{\Downarrow}
\newcommand{\diverges}{\Uparrow}
\newcommand{\mustconverge}{\converges^{\text{must}}}
\newcommand{\Iflt}{\mathtt{If{<}\;}}
\newcommand{\Ifgt}{\mathtt{If{>}\;}}
\newcommand{\inr}{{\mathsf{inr}}}
\newcommand{\inl}{{\mathsf{inl}}}
\newcommand{{\Na}}{\bN}
\newcommand{{\cell}}{{\mathsf{cell}}}
\newcommand{\fix}{{\mathsf{fix}}}
\newcommand{\eq}{{\mathsf{eq}}}
\DeclareMathOperator{\CCom}{CCom}
\newcommand{\power}{\mathfrak P}

% Slanty things
\newcommand*{\xslant}[2][76]{%
  \begingroup
    \sbox0{#2}%
    \pgfmathsetlengthmacro\wdslant{\the\wd0 + cos(#1)*\the\wd0}%
    \leavevmode
    \hbox to \wdslant{\hss
      \tikz[
        baseline=(X.base),
        inner sep=0pt,
        transform canvas={xslant=cos(#1)},
      ] \node (X) {\usebox0};%
      \hss
      \vrule width 0pt height\ht0 depth\dp0 %
    }%
  \endgroup
}

\makeatletter
\newcommand*{\xslantmath}{}
\def\xslantmath#1#{%
  \@xslantmath{#1}%
}
\newcommand*{\@xslantmath}[2]{%
  % #1: optional argument for \xslant including brackets
  % #2: math symbol
  \ensuremath{%
    \mathpalette{\@@xslantmath{#1}}{#2}%
  }%
}
\newcommand*{\@@xslantmath}[3]{%
  % #1: optional argument for \xslant including brackets
  % #2: math style
  % #3: math symbol
  \xslant#1{$#2#3\m@th$}%
}
\makeatother

\newcommand{\seqdeno}[1]{\xslantmath{\llbracket}#1\xslantmath{\rrbracket}}

% Empty set etc.

\let\oldemptyset\emptyset
\let\emptyset\varnothing

%% Constant width xrightarrows
\newlength{\arrow}
\settowidth{\arrow}{\scriptsize$1000$}
\newcommand*{\constantwidthxrightarrow}[1]{\xrightarrow{\mathmakebox[\arrow]{#1}}}

%% Landscape pages
\usepackage{everypage}
\usepackage{environ}
\usepackage{pdflscape}
\newcounter{abspage}

\ifdefined\NOTARTICLE

\else

\makeatletter
\newcommand{\newSFPage}[1]% #1 = \theabspage
  {\global\expandafter\let\csname SFPage@#1\endcsname\null}

\NewEnviron{SidewaysFigure}{\begin{figure}[p]
\protected@write\@auxout{\let\theabspage=\relax}% delays expansion until shipout
  {\string\newSFPage{\theabspage}}%
\ifdim\textwidth=\textheight
  \rotatebox{90}{\parbox[c][\textwidth][c]{\linewidth}{\BODY}}%
\else
  \rotatebox{90}{\parbox[c][\textwidth][c]{\textheight}{\BODY}}%
\fi
\end{figure}}

\AddEverypageHook{% check if sideways figure on this page
  \ifdim\textwidth=\textheight
    \stepcounter{abspage}% already in landscape
  \else
    \@ifundefined{SFPage@\theabspage}{}{\global\pdfpageattr{/Rotate 0}}%
    \stepcounter{abspage}%
    \@ifundefined{SFPage@\theabspage}{}{\global\pdfpageattr{/Rotate 90}}%
  \fi}
\makeatother

\fi

%% PCF Things

\newcommand{\nat}{{\mathtt{nat}}}
\newcommand{\bool}{{\mathtt{bool}}}

\newcommand{\Y}{\mathbf{Y}}
\newcommand{\opto}{\longrightarrow}
\newcommand{\oopto}{\dashrightarrow}
\newcommand{\n}{{\mathtt{n}}}
\DeclareMathOperator{\IfO}{{\mathsf{If0}}}
\DeclareMathOperator{\suc}{{\mathsf{succ}}}
\DeclareMathOperator{\pred}{{\mathsf{pred}}}
\newcommand{\0}{{\mathtt{0}}}

\newcommand{\iter}{{\mathtt{iter}}}
\newcommand{\rec}{\iter}
\newcommand{\Var}{{\mathtt{Var}}}
\DeclareMathOperator{\Varr}{Var}
\newcommand{\new}{{\mathtt{new}}}
\newcommand{\case}{{\mathtt{case}}}

\newcommand{\lmam}{\mathrel{\sqsubseteq_{m\&m}}}
\newcommand{\emam}{\mathrel{\equiv_{m\&m}}}
\newcommand{\lst}{\mathrel{\lesssim}}
\newcommand{\smam}{\mathrel{\sim_{m\&m}}}
\newcommand{\amam}{\mathrel{\approx_{m\&m}}}

\newcommand{\oes}{\sim}

%% Idealized Algol things

\newcommand{\com}{{\mathtt{com}}}
\newcommand{\skipp}{{\mathsf{skip}}}
\DeclareMathOperator{\seq}{{\mathsf{seq}}}
\DeclareMathOperator{\neww}{{\mathsf{new}}}
\DeclareMathOperator{\mkvar}{{\mathsf{mkvar}}}
\newcommand{\deref}{\texttt{@}}
\DeclareMathOperator{\dereff}{\mathsf{deref}}
\DeclareMathOperator{\assign}{\mathsf{assign}}
\newcommand{\ia}[2]{\langle #1 , #2 \rangle}
\newcommand{\stup}[3]{\langle #1 \mid #2 \mapsto #3 \rangle}

%% Hyland-Ong games things

\newbox\gnBoxA
\newdimen\gnCornerHgt
\setbox\gnBoxA=\hbox{$\ulcorner$}
\global\gnCornerHgt=\ht\gnBoxA
\newdimen\gnArgHgt
\def\pv #1{%
    \setbox\gnBoxA=\hbox{$#1$}%
    \gnArgHgt=\ht\gnBoxA%
    \ifnum     \gnArgHgt<\gnCornerHgt \gnArgHgt=0pt%
    \else \advance \gnArgHgt by -\gnCornerHgt%
    \fi \raise\gnArgHgt\hbox{$\ulcorner$} \box\gnBoxA %
    \raise\gnArgHgt\hbox{$\urcorner$}}
\def\ov #1{%
    \setbox\gnBoxA=\hbox{$#1$}%
    \gnArgHgt=\ht\gnBoxA%
    \ifnum     \gnArgHgt<\gnCornerHgt \gnArgHgt=0pt%
    \else \advance \gnArgHgt by -\gnCornerHgt%
    \fi \raise\gnArgHgt\hbox{$\llcorner$} \box\gnBoxA %
    \raise\gnArgHgt\hbox{$\lrcorner$}}
\newcommand{\ct}[1]{\lceil#1\rceil}
\DeclareMathOperator{\Int}{int}

%% Nondeterministic Factorization things

\newcommand{\code}{\mathsf{code}}
\newcommand{\Det}{\mathsf{Det}}

%% Flexible strategy things

\newcommand{\stle}{{\;\le_s\;}}
\newcommand{\steq}{{\;=_s\;}}
\newcommand{\exle}{\sqsubseteq}
\newcommand{\exlub}{\bigsqcup}
\newcommand{\dv}{{\text{\lightning}}}
\DeclareMathOperator{\pocl}{pocl}
\newcommand{\plot}{\mathrel{\triangleleft}}
\newcommand{\shad}{\mathfrak{S}}
%\newcommand{\tree}{\mathfrak{T}}
\newcommand{\Tau}{T}
\newcommand{\Epsilon}{E}
\newcommand{\sw}{\triangleleft}

%% Roman numerals

\newcommand{\RN}[1]{%
  \textup{\uppercase\expandafter{\romannumeral#1}}%
}
\newcommand{\RNl}[1]{%
  \mathrel{\raisebox{1pt}{$\overline{\underline{#1}}$}}
}

%% Game language things

\newcommand{\ul}[1]{{\underline{#1}}}
\newcommand{\A}{{\mathcal{A}}}
\renewcommand{\P}{\mathcal P}
\newcommand{\M}{\mathcal M}
\newcommand{\N}{\mathcal N}
\newcommand{\X}{\mathcal X}
\newcommand{\YY}{\mathcal Y}
\newcommand{\hole}{\blank}
\newcommand{\Tct}{\xrightarrow{T}t}
\newcommand{\teamconverge}[2]{\xrightarrow{#1}#2}

%% Inference rule things
\newcommand{\rulename}[1]{\LeftTirNameStyle{#1}}
\newcommand{\ts}{\mathbin{\vdash}}
\newcommand{\nts}{\mathbin{\not\vdash}}

%% Double category things
\newcommand{\hc}[2]{\left({#1}\middle|{#2}\right)}
\newcommand{\vc}[2]{\left(\frac{#1}{#2}\right)}

%% What is going on?
\DeclareMathOperator{\Kl}{Kl}
\DeclareMathOperator{\Mell}{Mell}
\newcommand{\powerset}{\mathcal P}
\DeclareMathOperator{\ask}{{\mathsf{ask}}}
\newcommand{\sleep}{{\mathsf{sleep}}}
\newcommand{\true}{\mathbbm{t}}
\newcommand{\false}{\mathbbm{f}}
\DeclareMathOperator{\If}{\mathsf{If}}
\newcommand{\Then}{\mathrel{\mathsf{then}}}
\newcommand{\Else}{\mathrel{\mathsf{else}}}
\newcommand\cat{\mathbin{+\mkern-10mu+}}

%% Profunctor arrows

\makeatletter
\def\slashedarrowfill@#1#2#3#4#5{%
  $\m@th\thickmuskip0mu\medmuskip\thickmuskip\thinmuskip\thickmuskip
   \relax#5#1\mkern-7mu%
   \cleaders\hbox{$#5\mkern-2mu#2\mkern-2mu$}\hfill
   \mathclap{#3}\mathclap{#2}%
   \cleaders\hbox{$#5\mkern-2mu#2\mkern-2mu$}\hfill
   \mkern-7mu#4$%
}
\def\rightslashedarrowfill@{%
  \slashedarrowfill@\relbar\relbar\mapstochar\rightarrow}
\newcommand\xslashedrightarrow[2][]{%
  \ext@arrow 0055{\rightslashedarrowfill@}{#1}{#2}}
\makeatother
\newcommand{\pto}{{\xslashedrightarrow{} }}

%% Profunctors 
\DeclareMathOperator{\Prof}{Prof}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Endoprof}{Endoprof}

%% Our

\def\searchmacro#1{
  \AtBeginOfFiles{%
    \ifdefined#1
      \expandafter\def\csname \currfilename:found\endcsname{}%
    \fi}
  \AtEndOfFiles{%
    \ifdefined#1
      \unless\ifcsname \currfilename:found\endcsname
        \immediate\write\finder{found in '\currfilename'}%
    \fi\fi}}

%% Isomorphism arrows on commutative diagrams %%
\tikzset{Isom/.style={every to/.append style={edge node={node [sloped, above, allow upside down, auto=false]{$\cong$}}}},
         Isom'/.style={every to/.append style={edge node={node [sloped, above, allow upside down, auto=false, rotate=180]{$\cong$}}}},
         Sim/.style={every to/.append style={edge node={node [sloped, above, allow upside down, auto=false]{$\sim$}}}},
         Sim'/.style={every to/.append style={edge node={node [sloped, above, allow upside down, auto=false, rotate=180]{$\sim$}}}}}

%% Adjunctions
\newcommand{\adjunction}[4]{%
  {#1} \underset{\underset{#3}{\longleftarrow}}{\overset{\overset{#2}{\longrightarrow}}{\bot}} {#4}}        

%% Important!
\newcommand\Mellies{Melli\`{e}s\xspace}

\makeatletter
\newcommand{\colim@}[2]{%
  \vtop{\m@th\ialign{##\cr
    \hfil$#1\operator@font colim$\hfil\cr
    \noalign{\nointerlineskip\kern1.5\ex@}#2\cr
    \noalign{\nointerlineskip\kern-\ex@}\cr}}%
}
\newcommand{\colim}{%
  \mathop{\mathpalette\colim@{\rightarrowfill@\textstyle}}\nmlimits@
}
\makeatother

\makeatletter
\newcommand{\laxcolim@}[2]{%
  \vtop{\m@th\ialign{##\cr
    \hfil$#1\operator@font colim_l$\hfil\cr
    \noalign{\nointerlineskip\kern1.5\ex@}#2\cr
    \noalign{\nointerlineskip\kern-\ex@}\cr}}%
}
\newcommand{\laxcolim}{%
  \mathop{\mathpalette\laxcolim@{\rightarrowfill@\textstyle}}\nmlimits@
}
\makeatother

\DeclareMathOperator{\Colim}{colim}

\DeclareMathOperator{\DG}{DG}
\DeclareMathOperator{\RV}{RV}
\newcommand{\Rv}{\catname{Rv}}

\let\choose\undefined
\DeclareMathOperator{\choose}{\mathsf{choose}}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\test}{test}

%% Slot game things %%
\newcommand{\circled}[1]{\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {#1}}}}
\newcommand{\slot}{{\circled{\$}}}

\DeclareMathOperator{\may}{may}
\DeclareMathOperator{\must}{must}

\newcommand{\encode}[1]{\lceil#1\rceil}
\DeclareMathOperator{\app}{\mathsf{app}}
\DeclareMathOperator{\lett}{\mathsf{let}}
\newcommand{\inn}{\mathrel{\mathsf{in}}}
\DeclareMathOperator{\byval}{\mathsf{byval}}

\DeclareMathOperator{\rread}{read}
\DeclareMathOperator{\wwrite}{write}

\DeclareSymbolFont{bbsymbol}{U}{bbold}{m}{n}
\DeclareMathSymbol{\bbsemicolon}{\mathbin}{bbsymbol}{"3B}
\newcommand{\semicom}{\bbsemicolon}

\newcommand{\ms}{\makebox[-1pt]{}}

\DeclareMathOperator{\Acc}{Acc}
\DeclareMathOperator{\im}{Im}
\DeclareMathOperator{\wit}{wit}

%%% END Article customizations

