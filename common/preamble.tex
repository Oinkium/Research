\usepackage[utf8]{inputenc}

\usepackage{graphicx} % support the \includegraphics command and options

\usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\ifdefined\BEAMER
\else
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)\prefix\t$.
\fi
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
\usepackage{mathtools} % for the all important \coloneqq symbol
\usepackage{url} % for \url
\usepackage{IEEEtrantools} % for \IEEEeqnarray
\usepackage{pbox} % for \pbox
\usepackage{multirow,bigdelim} % for \multirow
\usepackage{lettrine} % For the drop cap
\usepackage{mathpartir} % for \inferrule

\ifdefined\NOTARTICLE
\else

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

\fi

%% Font things %%
\usepackage{amssymb}
\usepackage{cmll} % Linear logic symbols!
\ifdefined\FEWFONTS
\else
\usepackage{bm} % for bold Greek letters
\usepackage{wasysym} % For left and rigth moons
\fi
\usepackage{stmaryrd}

%% Get the sqsubsetneqq character from the mathabx package
\DeclareFontFamily{U}{mathb}{\hyphenchar\font45}
\DeclareFontShape{U}{mathb}{m}{n}{
      <5> <6> <7> <8> <9> <10> gen * mathb
      <10.95> mathb10 <12> <14.4> <17.28> <20.74> <24.88> mathb12
      }{}
\DeclareSymbolFont{mathb}{U}{mathb}{m}{n}

\DeclareMathSymbol{\sqsubsetneq}    {3}{mathb}{"88}
\DeclareMathSymbol{\varsqsubsetneq} {3}{mathb}{"8A}
\DeclareMathSymbol{\varsqsubsetneqq}{3}{mathb}{"92}
\DeclareMathSymbol{\sqsubsetneqq}   {3}{mathb}{"90}

%% Lists %%
\usepackage{enumerate}

%% Graphics %%
\usepackage{tikz}
\usetikzlibrary{cd}
\usetikzlibrary{patterns}
\usetikzlibrary{calc}
\usetikzlibrary{decorations.pathmorphing}

\ifdefined\BEAMER
\else

%% Theorems! %%
\usepackage{amsthm}
\theoremstyle{plain} % Theorems, lemmas, propositions etc.
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{construction}[theorem]{Construction}
\theoremstyle{definition} % Definitions etc.  Remarks too, because I don't like the way the 'remark' style looks.
\newtheorem{definition}[theorem]{Definition}
\newtheorem{notation}[theorem]{Notation}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{remarks}[theorem]{Remarks}
\newtheorem{example}[theorem]{Example}
\newtheorem{question}[theorem]{Question}

\newtheoremstyle{note} {3pt} {3pt} {\itshape} {} {\itshape} {:} {.5em} {} % For short notes
\theoremstyle{note}
\newtheorem{note}[theorem]{Note}

\fi

%% Exercises and answers %%
\usepackage{answers}

\newtheoremstyle{exercisestyle}% name
  {6pt}   % ABOVESPACE
  {6pt}   % BELOWSPACE
  {\itshape}  % BODYFONT
  {0pt}       % INDENT (empty value is the same as 0pt)
  {\bfseries} % HEADFONT
  {.}         % HEADPUNCT
  {3pt} % HEADSPACE
  {}          % CUSTOM-HEAD-SPEC

\theoremstyle{exercisestyle}
\newtheorem{exercise}{Exercise}
\newtheorem{answerthm}{Exercise}

\Newassociation{answer}{answerthm}{answers}
\newcommand{\answerthmparams}{}

%% Changes to enumerate things so they look better %%\sigma$

\makeatletter
\def\enumfix{%
\if@inlabel
 \noindent \par\nobreak\vskip-\topsep\hrule\@height\z@
\fi}

\let\olditemize\itemize
\def\itemize{\enumfix\olditemize}
\let\oldenumerate\enumerate
\def\enumerate{\enumfix\oldenumerate}

%% Random crap %%
\usepackage{xifthen}

\makeatletter
\def\thm@space@setup{%
  \thm@preskip=\parskip \thm@postskip=0pt
}
\makeatother

\makeatletter
\newcommand*{\relrelbarsep}{.386ex}
\newcommand*{\relrelbar}{%
  \mathrel{%
    \mathpalette\@relrelbar\relrelbarsep
  }%
}
\newcommand*{\@relrelbar}[2]{%
  \raise#2\hbox to 0pt{$\m@th#1\relbar$\hss}%
  \lower#2\hbox{$\m@th#1\relbar$}%
}
\providecommand*{\rightrightarrowsfill@}{%
  \arrowfill@\relrelbar\relrelbar\rightrightarrows
}
\providecommand*{\leftleftarrowsfill@}{%
  \arrowfill@\leftleftarrows\relrelbar\relrelbar
}
\providecommand*{\xrightrightarrows}[2][]{%
  \ext@arrow 0359\rightrightarrowsfill@{#1}{#2}%
}
\providecommand*{\xleftleftarrows}[2][]{%
  \ext@arrow 3095\leftleftarrowsfill@{#1}{#2}%
}
\makeatother

\newcommand{\catname}[1]{{\normalfont\textbf{#1}}}
\newcommand{\Rings}{\catname{CRing}}
\newcommand{\CAT}{\catname{CAT}}
\newcommand{\Top}{\catname{Top}}
\newcommand{\Set}{\catname{Set}}
\newcommand{\Cont}{\catname{Cont}}
\newcommand{\Sch}{\catname{Sch}}
\newcommand{\Rel}{\catname{Rel}}
\newcommand{\Mod}[1][]{\ifthenelse{\isempty{#1}}{\catname{Mod}}{#1\catname{mod}}}
\DeclareMathOperator{\sh}{Sh}
\newcommand{\Sh}[1][]{\ifthenelse{\isempty{#1}}{\sh}{\sh(#1)}}
\newcommand{\map}[3]{#2\xrightarrow{#1} #3}
\newcommand*\from{\colon}
\newcommand{\cmap}[3]{#1\from{}#2\to{}#3}
\newcommand\oppcat[1]{#1^{\mathrm{op}}}
\DeclareRobustCommand{\vmap}[3] {\begin{tikzcd} #2 \arrow[d, "#1"] \\ #3 \end{tikzcd}}
\newcommand{\partref}[1]{(\ref{#1})}
\newcommand{\intgrpd}[4] {#1 \xrightrightarrows[#3]{#4} #2}
\DeclareRobustCommand{\bigintgrpd}[4] {\begin{tikzcd}[ampersand replacement=\&] #1 \arrow[r, shift left=0.5ex, "#3"] \arrow[r, shift right=0.5ex, "#4"'] \& #2 \end{tikzcd}}

\usepackage{xspace}

\newcommand{\etale}{\'{e}tale\xspace}
\newcommand{\Etale}{\'{E}tale\xspace}

\def \inv {^{-1}}

\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\op}{op}
\DeclareMathOperator{\pr}{pr}
\DeclareMathOperator{\pre}{{pre}}
\DeclareMathOperator{\et}{{\acute{e}t}}

\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Spec}{Spec}

\DeclareMathOperator{\ol}{ol}

\def\presuper#1#2%
  {\mathop{}%
   \mathopen{\vphantom{#2}}^{#1}%
   \kern-\scriptspace%
   #2}
\def\presub#1#2%
  {\mathop{}%
   \mathopen{\vphantom{#2}}_{#1}%
   \kern-\scriptspace%
   #2}

\newsavebox{\overlongequation}
\newenvironment{longdiagram}
 {\begin{displaymath}\begin{lrbox}{\overlongequation}$\displaystyle}
 {$\end{lrbox}\makebox[0pt]{\usebox{\overlongequation}}\end{displaymath}}

%% Our things %%

\newcommand{\neggame}[1]{\presuper{\perp}{#1}}
\newcommand{\tensor}{\otimes}
\newcommand{\sequoid}{\oslash}
\newcommand{\varsequoid}{\vartriangleleft}
\renewcommand{\implies}{\multimap}
\newcommand{\iimpl}{\Longrightarrow}
\newcommand{\comp}[2]{#1 \circ #2}
\newcommand{\icomp}[2]{\comp{#1}{#2}}
\newcommand{\cprd}{\sqcup}
\newcommand{\bigcprd}{\bigsqcup}
\newcommand{\G}{\mathcal G}
\newcommand{\W}{\mathcal W}
\newcommand{\suchthat}{\;\colon\;}
\newcommand{\varsuchthat}{\;\mid\;}
\newcommand{\esuchthat}{\;.\;}
\newcommand{\OP}{\{O,P\}}
\newcommand{\QA}{\{Q,A\}}
\renewcommand{\L}{\mathcal L}
\newcommand{\F}{\mathcal F}
\newcommand{\U}{\mathcal U}
\newcommand{\s}{\mathfrak s}
\renewcommand{\t}{\mathfrak t}
\renewcommand{\u}{\mathfrak u}
\renewcommand{\d}{\mathfrak d}
\newcommand{\e}{\mathfrak e}
\newcommand{\emptyplay}{\epsilon}
\newcommand{\bracketed}[1]{\left({#1}\right)}
\newcommand{\bneggame}[1]{{\bracketed{\neggame{#1}}}}
\newcommand{\prefix}{\sqsubseteq}
\newcommand{\ppprefix}{\sqsubset}
\newcommand{\pprefix}{\sqsubsetneqq}
\renewcommand{\ss}{\mathbf{s}}
\newcommand{\bN}{\mathbb{N}}
\newcommand{\pfun}{\rightharpoonup}
\newcommand{\grel}[1]{\underline{#1}}
\DeclareMathOperator{\length}{length}
\renewcommand{\b}{\mathfrak b}
\renewcommand{\r}{\mathfrak r}
\newcommand{\bbeta}{{\bm{\beta}}}
\newcommand{\st}{{\Sigma^*}}
\renewcommand{\S}{{\mathfrak{S}}}
\DeclareMathOperator{\cc}{cc}
\newcommand{\B}{\mathcal B}
\renewcommand{\H}{\mathcal H}
\DeclareMathOperator{\assoc}{assoc}
\DeclareMathOperator{\lunit}{lunit}
\DeclareMathOperator{\runit}{runit}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\sym}{sym}
\newcommand{\braid}{\sym}
\newcommand{\blank}{\;\underline{\hspace{1.5ex}}\;}
\DeclareMathOperator{\cn}{cn}
\newcommand{\impliescn}{\protect\overset{\cn}{\implies}}
\newcommand{\C}{{\mathcal{C}}}
\DeclareMathOperator{\ev}{ev}
\newcommand{\der}{{\mathtt{der}}}
\newcommand{\mult}{{\mathtt{mult}}}
\DeclareMathOperator{\wk}{wk}
\newcommand{\toisom}{{\xrightarrow{\cong}}}
\newcommand{\passoc}{{\mathtt{passoc}}}
\newcommand{\pcomm}{{\mathtt{pcomm}}}
\newcommand{\run}{{\mathtt{r}}}
\newcommand{\lun}{{\mathtt{l}}}
\ifdefined\FEWFONTS
\else
\newcommand{\fcoal}[1]{{\leftmoon #1 \rightmoon}}
\fi
\DeclareMathSymbol{\co}{\mathord}{operators}{"3C}
\DeclareMathSymbol{\nw}{\mathord}{operators}{"3E}
\newcommand{\T}{\mathfrak{T}}
\renewcommand{\subset}{\subseteq}
\newcommand{\Ord}{\catname{Ord}}
\newcommand{\FS}{\mathcal{FS}}
\DeclareMathOperator{\rank}{rank}
\newcommand{\dist}{{\mathtt{dist}}}
\newcommand{\dec}{{\mathtt{dec}}}
\DeclareMathOperator{\str}{str}
\DeclareMathOperator{\weak}{weak}
\DeclareMathOperator{\Strat}{Strat}
\DeclareMathOperator{\OppStrat}{OppStrat}
\newcommand{\seqs}[1]{{\overline{{#1}^{*}}}}
\def\flushRight{\leftskip0pt plus 1fill\rightskip0pt}
\def\Centering{\relax\ifvmode\centering\fi}
\newcommand{\deno}[1]{\left\llbracket#1\right\rrbracket}
\newcommand{\nat}{{\mathtt{nat}}}
\newcommand{\mustconverge}{\Downarrow}
\newcommand{\Iflt}{\mathtt{If{<}\;}}
\newcommand{\Ifgt}{\mathtt{If{>}\;}}
\newcommand{\inr}{{\mathsf{inr}}}
\newcommand{\inl}{{\mathsf{inl}}}
\newcommand{{\Na}}{\bN}
\newcommand{{\cell}}{{\mathsf{cell}}}
\newcommand{\fix}{{\mathsf{fix}}}
\newcommand{\eq}{{\mathsf{eq}}}
\DeclareMathOperator{\CCom}{CCom}
\newcommand{\power}{\mathfrak P}

\let\oldemptyset\emptyset
\let\emptyset\varnothing

%% Constant width xrightarrows
\newlength{\arrow}
\settowidth{\arrow}{\scriptsize$1000$}
\newcommand*{\constantwidthxrightarrow}[1]{\xrightarrow{\mathmakebox[\arrow]{#1}}}

%% Landscape pages
\usepackage{everypage}
\usepackage{environ}
\usepackage{pdflscape}
\newcounter{abspage}

\ifdefined\NOTARTICLE

\else

\makeatletter
\newcommand{\newSFPage}[1]% #1 = \theabspage
  {\global\expandafter\let\csname SFPage@#1\endcsname\null}

\NewEnviron{SidewaysFigure}{\begin{figure}[p]
\protected@write\@auxout{\let\theabspage=\relax}% delays expansion until shipout
  {\string\newSFPage{\theabspage}}%
\ifdim\textwidth=\textheight
  \rotatebox{90}{\parbox[c][\textwidth][c]{\linewidth}{\BODY}}%
\else
  \rotatebox{90}{\parbox[c][\textwidth][c]{\textheight}{\BODY}}%
\fi
\end{figure}}

\AddEverypageHook{% check if sideways figure on this page
  \ifdim\textwidth=\textheight
    \stepcounter{abspage}% already in landscape
  \else
    \@ifundefined{SFPage@\theabspage}{}{\global\pdfpageattr{/Rotate 0}}%
    \stepcounter{abspage}%
    \@ifundefined{SFPage@\theabspage}{}{\global\pdfpageattr{/Rotate 90}}%
  \fi}
\makeatother

\fi

%% PCF Things

\newcommand{\Y}{\mathbf{Y}}
\newcommand{\opto}{\longrightarrow}
\newcommand{\n}{{\mathtt{n}}}
\newcommand{\IfO}{{\mathtt{If0}\;}}
\newcommand{\suc}{{\mathtt{suc\;}}}
\newcommand{\0}{{\mathtt{0}}}

\newcommand{\rec}{{\mathtt{iter}}}
\newcommand{\iter}{\rec}
\newcommand{\Var}{{\mathtt{Var}}}

%% Flexible strategy things

\newcommand{\stle}{{\;\le_s\;}}
\newcommand{\steq}{{\;=_s\;}}
\newcommand{\exle}{\sqsubseteq}
\newcommand{\exlub}{\bigsqcup}
\newcommand{\dv}{{\text{\lightning}}}
\DeclareMathOperator{\pocl}{pocl}
\newcommand{\plot}{\triangleleft}
\newcommand{\shad}{\mathfrak{S}}
\newcommand{\tree}{\mathfrak{T}}
\newcommand{\Tau}{T}
\newcommand{\sw}{\triangleleft}

%% Roman numerals

\newcommand{\RN}[1]{%
  \textup{\uppercase\expandafter{\romannumeral#1}}%
}
\newcommand{\RNl}[1]{%
  \mathrel{\raisebox{1pt}{$\overline{\underline{#1}}$}}
}

%% Game language things

\newcommand{\ul}[1]{{\underline{#1}}}
\newcommand{\A}{{\mathcal{A}}}
\renewcommand{\P}{\mathcal P}
\newcommand{\M}{\mathcal M}
\newcommand{\hole}{\blank}
\newcommand{\Tct}{\xrightarrow{T}t}
\newcommand{\teamconverge}[2]{\xrightarrow{#1}#2}

%% Inference rule things
\newcommand{\rulename}[1]{\LeftTirNameStyle{#1}}
\newcommand{\ts}{{\;\vdash}}

%% Our

%% Isomorphism arrows on commutative diagrams %%
\tikzset{Isom/.style={every to/.append style={edge node={node [sloped, above, allow upside down, auto=false]{$\cong$}}}},
         Isom'/.style={every to/.append style={edge node={node [sloped, above, allow upside down, auto=false, rotate=180]{$\cong$}}}},
         Sim/.style={every to/.append style={edge node={node [sloped, above, allow upside down, auto=false]{$\sim$}}}},
         Sim'/.style={every to/.append style={edge node={node [sloped, above, allow upside down, auto=false, rotate=180]{$\sim$}}}}}


%%% END Article customizations

