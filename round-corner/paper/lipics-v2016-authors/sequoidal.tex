\documentclass[a4paper,UKenglish]{lipics-v2016}
%This is a template for producing LIPIcs articles. 
%See lipics-manual.pdf for further information.
%for A4 paper format use option "a4paper", for US-letter use option "letterpaper"
%for british hyphenation rules use option "UKenglish", for american hyphenation rules use option "USenglish"
% for section-numbered lemmas etc., use "numberwithinsect"
 
\usepackage{microtype}%if unwanted, comment out or use option "draft"

%\graphicspath{{./graphics/}}%helpful if your graphic files are in another directory

\bibliographystyle{plainurl}% the recommended bibstyle

% Author macros::begin %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title{Sequoidal Categories and Transfinite Games: Towards a Coalgebraic Approach to Linear Logic\footnote{This work was partially supported by [TODO: find the appropriate grant codes]}}
\titlerunning{Sequoidal Categories and Transfinite Games} %optional, in case that the title is too long; the running title should fit into the top page column

%% Please provide for each author the \author and \affil macro, even when authors have the same affiliation, i.e. for each author there needs to be the  \author and \affil macros
\author[1]{William John Gowers}
\author[2]{James Laird}
\affil[1]{Department of Computer Science, University of Bath, Claverton Down, Bath.  BA2 7AY.  United Kingdom\\
  \texttt{W.J.Gowers@bath.ac.uk}}
\affil[2]{Department of Computer Science, University of Bath, Claverton Down, Bath.  BA2 7AY.  United Kingdom\\
  \texttt{jiml@cs.bath.ac.uk}}
\authorrunning{W.\,J. Gowers and J. Laird} %mandatory. First: Use abbreviated first/middle names. Second (only in severe cases): Use first author plus 'et. al.'

\Copyright{William John Gowers and James Laird}%mandatory, please use full first names. LIPIcs license is "CC-BY";  http://creativecommons.org/licenses/by/3.0/

\subjclass{F3.2.2 Denotational Semantics}% mandatory: Please choose ACM 1998 classifications from http://www.acm.org/about/class/ccs98-html . E.g., cite as "F.1.1 Models of Computation". 
\keywords{Game semantics, Linear logic, Transfinite games, Sequoid operator, Exponentials}% mandatory: Please provide 1-5 keywords
% Author macros::end %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%Editor-only macros:: begin (do not touch as author)%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\EventEditors{John Q. Open and Joan R. Acces}
\EventNoEds{2}
\EventLongTitle{42nd Conference on Very Important Topics (CVIT 2016)}
\EventShortTitle{CVIT 2016}
\EventAcronym{CVIT}
\EventYear{2016}
\EventDate{December 24--27, 2016}
\EventLocation{Little Whinging, United Kingdom}
\EventLogo{}
\SeriesVolume{42}
\ArticleNo{23}
% Editor-only macros::end %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Additional packages and macros
\usepackage{IEEEtrantools} % for \IEEEeqnarray
\usepackage{pbox} % for \pbox
\usepackage{cmll} % Linear logic symbols!
\usepackage{wasysym} % For left and rigth moons
\usepackage{mathtools}

%% Graphics %%
\usepackage{tikz}
\usetikzlibrary{cd}
\usetikzlibrary{patterns}
\usetikzlibrary{calc}
\usetikzlibrary{decorations.pathmorphing}

%% Get the sqsubsetneqq character from the mathabx package
\DeclareFontFamily{U}{mathb}{\hyphenchar\font45}
\DeclareFontShape{U}{mathb}{m}{n}{
      <5> <6> <7> <8> <9> <10> gen * mathb
      <10.95> mathb10 <12> <14.4> <17.28> <20.74> <24.88> mathb12
      }{}
\DeclareSymbolFont{mathb}{U}{mathb}{m}{n}

\DeclareMathSymbol{\sqsubsetneq}    {3}{mathb}{"88}
\DeclareMathSymbol{\varsqsubsetneq} {3}{mathb}{"8A}
\DeclareMathSymbol{\varsqsubsetneqq}{3}{mathb}{"92}
\DeclareMathSymbol{\sqsubsetneqq}   {3}{mathb}{"90}

%% Theorems %%
\theoremstyle{plain}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{exercise}{Exercise}
\theoremstyle{definition}
\newtheorem{notation}[theorem]{Notation}

%% Other macros
\newcommand*\from{\colon}
\def \inv {^{-1}}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\pr}{pr}
\newcommand{\tensor}{\otimes}
\newcommand{\sequoid}{\oslash}
\renewcommand{\implies}{\multimap}
\newcommand{\comp}[2]{#2 ; #1}
\newcommand{\cprd}{\sqcup}
\newcommand{\bigcprd}{\bigsqcup}
\newcommand{\C}{\mathcal C}
\newcommand{\F}{\mathcal F}
\newcommand{\G}{\mathcal G}
\newcommand{\W}{\mathcal W}
\newcommand{\suchthat}{\;\colon\;}
\newcommand{\varsuchthat}{\;\mid\;}
\newcommand{\OP}{\{O,P\}}
\newcommand{\emptyplay}{\epsilon}
\newcommand{\prefix}{\sqsubseteq}
\newcommand{\pprefix}{\sqsubsetneqq}
\newcommand{\ppprefix}{\sqsubset}
\DeclareMathOperator{\assoc}{assoc}
\DeclareMathOperator{\lunit}{lunit}
\DeclareMathOperator{\runit}{runit}
\DeclareMathOperator{\sym}{sym}
\newcommand{\braid}{\sym}
\newcommand{\blank}{\;\underline{\hspace{1.5ex}}\;}
\newcommand{\der}{{\mathtt{der}}}
\newcommand{\mult}{{\mathtt{mult}}}
\DeclareMathOperator{\wk}{wk}
\newcommand{\toisom}{{\xrightarrow{\cong}}}
\newcommand{\passoc}{{\mathtt{passoc}}}
\newcommand{\pcomm}{{\mathtt{pcomm}}}
\newcommand{\run}{{\mathtt{r}}}
\newcommand{\lun}{{\mathtt{l}}}
\newcommand{\fcoal}[1]{{\leftmoon #1 \rightmoon}}
\renewcommand{\subset}{\subseteq}
\let\oldemptyset\emptyset
\let\emptyset\varnothing
\newcommand{\s}{\mathfrak{s}}
\newcommand{\dist}{{\mathtt{dist}}}
\newcommand{\dec}{{\mathtt{dec}}}
\renewcommand{\int}{{\mathtt{coh}}}
\renewcommand{\coh}{\int}
\DeclareMathOperator{\CCom}{CCom}
\newcommand{\catname}[1]{{\mathsf{#1}}}
\newcommand{\Set}{\catname{Set}}
\newcommand{\Ord}{\catname{Ord}}
\newcommand\oppcat[1]{#1^{\mathrm{op}}}
\newcommand{\bN}{{\mathbb{N}}}
\newcommand{\OK}{{\mathtt{OK}}}
\newcommand{\zero}{{\mathtt{zero}}}
\renewcommand{\succ}{{\mathtt{succ}}}
\newcommand{\Var}{{\mathtt{Var}}}
\renewcommand{\read}{{\mathtt{read}}}
\newcommand{\wwrite}{{\mathtt{write}}}
\newcommand{\Rel}{\catname{Rel}}
\newcommand{\inr}{{\mathsf{inr}}}
\newcommand{\inl}{{\mathsf{inl}}}
\newcommand{{\Na}}{\bN}
\newcommand{{\cell}}{{\mathsf{cell}}}
\newcommand{\fix}{{\mathsf{fix}}}
\newcommand{\eq}{{\mathsf{eq}}}
\newcommand{\co}{{\textrm{\textexclamdown}}}

%%OUR

%% Constant width xrightarrows
\newlength{\arrow}
\settowidth{\arrow}{\scriptsize$1000$}
\newcommand*{\constantwidthxrightarrow}[1]{\xrightarrow{\mathmakebox[\arrow]{#1}}}

%% Landscape pages
\usepackage{everypage}
\usepackage{environ}
\usepackage{pdflscape}
\newcounter{abspage}

\makeatletter
\newcommand{\newSFPage}[1]% #1 = \theabspage
  {\global\expandafter\let\csname SFPage@#1\endcsname\null}

\NewEnviron{SidewaysFigure}{\begin{figure}[p]
\protected@write\@auxout{\let\theabspage=\relax}% delays expansion until shipout
  {\string\newSFPage{\theabspage}}%
\ifdim\textwidth=\textheight
  \rotatebox{90}{\parbox[c][\textwidth][c]{\linewidth}{\BODY}}%
\else
  \rotatebox{90}{\parbox[c][\textwidth][c]{\textheight}{\BODY}}%
\fi
\end{figure}}

\AddEverypageHook{% check if sideways figure on this page
  \ifdim\textwidth=\textheight
    \stepcounter{abspage}% already in landscape
  \else
    \@ifundefined{SFPage@\theabspage}{}{\global\pdfpageattr{/Rotate 0}}%
    \stepcounter{abspage}%
    \@ifundefined{SFPage@\theabspage}{}{\global\pdfpageattr{/Rotate 90}}%
  \fi}
\makeatother

\begin{document}

\maketitle

\begin{abstract}
The non-commutative sequoid operator $\sequoid$ on games was introduced by one of the authors in order to capture algebraically the presence of state in history-sensitive strategies in game semantics.  It imposes a causality relation on to the  tensor product of games, so that coalgebras for the  functor  $A\sequoid\blank$  - i.e. morphisms from $S$ to $A \sequoid S$ may be viewed as state transformers.  If $A\sequoid\blank$ has a final coalgebra, $\oc A$, then the anamorphism of such a state transformer encapsulates its explicit state, so that it is shared only between successive invocations.

We shall study  conditions under which such a final coalgebra $\oc A$ for the functor $A\sequoid\blank$ is the carrier of a cofree commutative comonoid on $A$. That is, it is a model of the exponential of linear logic, but one in which we can construct imperative objects such as reference cells and stacks coalgebraically, and reason about them coinductively, in a game semantics setting.
 
We shall review the definition of a sequoidal category, a category-theoretic formalization of the sequoid operator, and the notion of sequoidal decomposition of a symmetric monoidal category.  We show that given such a decomposition, the final coalgebra !A may be endowed with the structure of the cofree commutative comonoid if it is the bifree algebra for $A\sequoid\blank$, or if it is a limit of sequoidal powers (following the construction  of the cofree commutative comonoid by Melli\'es, Tabareau and Tasson), or if the functor $\oc$ is strong monoidal - for all  $A$ and $B$, the objects $\oc (A \times B)$ and $\oc A \tensor \oc B$ are naturally isomorphic. 

We establish necessity of this final condition  by giving an example of a sequoidally decomposable category of games in which plays will be allowed to have transfinite length. In this category, the final coalgebra for the functor $A\sequoid\blank$ is not the cofree commutative comonoid over $A$: we illustrate this by explicitly contrasting the final sequence for the functor $A\sequoid\blank$ with the chain of sequoidal powers used in the Melli\'es-Tabareau-Tasson construction.
\end{abstract}

\section{Introduction}

Games models of pure functional programming languages such as PCF (\cite{ajmPcf} and \cite{hoPcf}, for example) tend to include the requirement that strategies be \emph{history-free}: that is, the response to a particular position may depend only upon the last move played, and not upon what has gone before.  This makes sense for stateless languages, where the program should have no `memory' to recall what has gone before.  

If we include history-sensitive strategies in our models, then we can start to recover some stateful behaviour (see \cite{SamsonGuyIAPassive}, for example), since history-sensitive strategies have a built in state.  This concept of state is often hard to work with: since the representation as a strategy is so intensional, there is no object representing the state, and the state of the program must be inferred from the behaviour of the strategy.  

At the other extreme, we have traditional, domain-theoretic semantics, in which stateful programs are represented as \emph{state transformers} -- that is, functions $W\times X \to W\times Y$, where $W$ is an object representing the state.  

State transformers are typically fairly straightforward to reason about, and we would like to have a similar technique available in our games models.  This gap was bridged by one of the authors in \cite{laird02} with the introduction of the new \emph{sequoid} operator $\blank\sequoid\blank$ on games, which the same as the tensor product $\blank\tensor\blank$, except that play is required to start in the left hand game.  We interpret a state transformer as a coalgebra for the functor $A\sequoid\blank$ -- that is, a morphism from $S$ to $A\sequoid S$, so that the state $S$ is only modified after the program $A$ has been consulted.  The benefit of this explicit ordering is that we may model multiple iterations of the state transformer as coalgebras:
\[
  S \to A \sequoid (A \sequoid \cdots \sequoid (A \sequoid S)\cdots)
  \]
where the copies of $A$ are started in order from left to right.  The state from a previous invocation of $A$ is passed on to the next, until the final modified state finally appears at the right.  

Now we introduce the key part of the construction: suppose that the functor $A\sequoid\blank$ has a final coalgebra $\oc A\to A\sequoid \oc A$.  Then a coalgebra $S\to A\sequoid S$ (i.e., a state transformer) naturally gives rise to a morphism $S \to \oc A$ in which the state is completely encapsulated and we are allowed to invoke the program $A$ as many times as we like.  We will show that we can construct various history-sensitive strategies denoting stateful programs using precisely this strategy; in particular, we will give a coalgebraic construction of the $\cell$ strategy from \cite{SamsonGuyIAPassive}, which is the key to their model for Idealized Algol.  

Even more intriguingly, the game $\oc A$ that arises as the final coalgebra for the functor $A\sequoid\blank$ has the structure of an exponential object in the category of games: it is the cofree commutative comonoid over $A$.  We will spend the rest of the paper examining why this is, and what general conditions we need in order to show that the final coalgebra for $\oc A$ and the cofree commutative comonoid over $A$ coincide.  For this, we will need the abstract definition of a \emph{sequoidal category}, which is an extension of a monoidal category in order to accommodate the sequoid operator.  We will first consider the explicit formula for the cofree commutative comonoid given by Melli\'es, Tabareau and Tasson in \cite{MelliesCofCommCom} and show that it can be given a sequoidal interpretation.  The Melli\'es-Tabareau-Tasson construction works for finite games, but its hypotheses do not hold in the case of the category of games with infinitary winning conditions and winning strategies, even though the final coalgebra for $A\sequoid\blank$ and the cofree commutative comonoid over $A$ still coincide in these categories.  

Instead, we will show that if our sequoidal category has all products then the cofree commutative comonoid structure on $\oc A$ may be constructed directly from the sequoidal structure and the definition of $A\sequoid\blank$ as a final coalgebra for $A\sequoid\blank$, provided that we insist on a further hypothesis: that the functor $\oc$ is monoidal from the Cartesian category to the monoidal category: i.e., if we have an isomorphism between $\oc A \tensor \oc B$ and $\oc(A\times B)$ for all $A,B$.  We show that this hypothesis is automatically satisfied whenever $\oc A$ has the structure of a \emph{bifree algebra} for $A\sequoid\blank$; i.e., when it simultaneously has the structure of final coalgebra and initial algebra.  However, the exponential in the category of win-games is not an initial algebra for $A\sequoid\blank$ \cite{martinsthesis}.

Lastly, we will provide an illuminating counterexample: a category of games in which the final coalgebra for $A\sequoid\blank$ and the cofree commutative comonoid over $A$ do not coincide.  This is the category of games where plays are allowed to have transfinite length.  We will show that the Melli\'es-Tabareau-Tasson construction fails badly in this setting, but that we may still construct the final coalgebra for $A\sequoid\blank$ as the limit of its final sequence.  In this setting, the final coalgebra is the game where we have `only' $\omega$-many copies of the sub-game to play in, whereas in the cofree commutative comonoid we may open transfinite sequences of the subgame.  

\section{Defining Higher-order Stateful Objects, Coalgebraically}
In this section we motivate the study of the coalgebraically derived cofree comonoid in game semantics by considering a similar but simpler and more familiar phenomenon. A \emph{state-transformer} in a symmetric monoidal category is a morphism $f:A \otimes S \rightarrow B \otimes S$ taking an argument together with an input state to a result together with a input state. A well-studied \cite{jacobs} technique in semantics is to  use an appropriate final coalgebra to \emph{encapsulate} the state in such a transformer, allowing multiple  successive invocations, each of which passes its output state as an input state to the next invocation. 

For example, consider the category $\Rel$ of sets and relations, with symmetric monoidal structure given by the cartesian product (with unit $I$, the singleton set $\{*\}$). This has finite (bi)products given by the disjoint union of sets: define the functor $F(A,S) = (A \otimes S) \oplus I$ 

For any object (set) $A$, let $A^*$ be the set $A^*$ of finite sequences of elements of $A$ (i.e. the carrier of the free monoid on $A$), and $\alpha:A^* \rightarrow F(A,A^*)$ be the morphism $\{(\varepsilon,\inr(*)\}\cup  \{(aw,(\inl(a,w))\ |\ a \in A,w \in A^*\}$   
\begin{lemma}$(A^*,\alpha_A)$ is a final coalgebra  for $F(A,\_)$.
\end{lemma}
\begin{proof}$\Rel$ may be cpo-enriched with the inclusion order: $A^*$ is a \emph{minimal invariant} for $F(A,\_)$ with respect to this order.
\end{proof}
Since we have a natural transformation (left injection) $\inl_{A,S}:A \otimes S \rightarrow F(A,S)$, we may encapsulate the state in the  state transformer $f:S \rightarrow A \otimes S$ by taking the \emph{anamorphism} of $f;\inl_{A,B}:S \rightarrow F(A,S)$, --- i.e. the unique $F(A,\_)$-coalgebra morphism from $(S,f;\inl)$ into $(A^*,\alpha_{A})$. This  is  a morphism from an initial state $S$ into $A^*$: by definition, composing it with $\alpha:A \rightarrow F(A,A)$ (which we can think of as  \emph{invoking} our stateful object) returns a copy of $f$ and uses it to update the internal state.   

By distributivity of $\oplus$ over  $\otimes$ we have a natural transformation $t: F(A,S) \otimes S' \rightarrow F(A,S \otimes S')$. We may use this to encapsulate  state transformers of general form: given $f:A \otimes S \rightarrow B \otimes S$, taking the anamorphism of the $F(B,\_)$-colagebra:    
$$A^* \otimes S  \stackrel{\alpha_A \otimes S}{\longrightarrow} F(A,A^*) \otimes S \stackrel{t}{\longrightarrow} F(A,A^* \otimes S)$$       

 Distributivity of $\oplus$ over $\otimes$ also implies that $F(A \oplus A',S) \cong F(A,S) \oplus F(A',S)$.  This allows state transformers to be aggregated, to construct stateful objects compounded of a series of methods which share access to a common state.
i.e. given morphisms $f_1:A_1 \otimes S \rightarrow B_1 \otimes S, \ldots , f_n:A_n \otimes S \rightarrow B_n \otimes S$, encapsulating  $\dist;(f_1 \oplus \ldots \oplus f_n);\dist^{-1}$, gives a morphism from $(A_1 \oplus \ldots \oplus A_n)^* \otimes S$ into $(B_1 \oplus \ldots \oplus B_n)^*$.          

For example, we may represent a reference cell storing integer values as a state transformer $\cell:\Na \rightarrow (\Na \oplus \Na) \otimes \Na$, obtained by aggregating two ``methods'' which share access to a state consisting of a single integer, representing the contents of the cell --- returning a ``read'' of the input state (and leaving it unchanged) or accepting a ``write'' of a new value and using it to update the state.   Thus (with appropriate tagging) it is the relation $\{(i, (\read(i),i))\ |\ i \in \Na\} \cup \{(i,{\mathtt{write}}(j),j)\}$.
The anamorphism of the coalgebra $\cell;\inl:\Na \rightarrow F(\Na \oplus \Na,\Na) $  is the relation from $\Na$ to $(\Na \oplus \Na)^*$ consisting of pairs of the form $(i_1,\read(i_1)^*{\mathtt{write}}(i_2)\read(i_2)^*\ldots)$ Composition with this morphism is precisely the denotation of new variable declaration in the semantics of  Reynolds \emph{Syntactic Control of Interference} (SCI) in $\Rel$ given in \cite{Mcsci}.

Coalgebraic methods thus give us a recipe for constructing and using categorical definitions of stateful semantic objects, avoiding direct definitions which are rather combinatorial to work with.  In order to fully exploit these, however, we may endow $A^*$ with the structure of a \emph{comonoid} by defining morphisms $\delta_A:A^* \rightarrow A^* \otimes A^* = \{(u\cdot v,(u,v))\ |\ u,v \in A^*\}$ and $\epsilon:A \rightarrow I = \{(\varepsilon,*)\}$ 

 In fact, this is the \emph{cofree comonoid} on $A$ --- there is a morphism $\eta_A:A^* \rightarrow A = \{(a,a)\ | \ a \in A\}$ such that for any comonoid $(B,\delta_B,\epsilon_B)$, composition with $\eta_A$ defines an equivalence (natural in $B$)  between the morphisms from $B$ into $A$, and the comonoid morphisms from $(B,\delta_B,\epsilon_B)$ into  $(A^*,\delta_A,\epsilon_A)$.   
\begin{proposition}$(A^*,\delta,\epsilon)$ is the cofree comonoid on $\Rel$.
\end{proposition}
The definitions of $\delta$ and $\epsilon$, and the proof that this is the cofree comonoid  may be derived from the fact that $(A^*,\alpha_A)$ is a \emph{bifree algebra} for $F(\_, A)$  --- i.e. $(A^*,\alpha^{-1})$ is an initial algebra for $F(A,\_)$ ($\alpha$ must be an isomorphism by Lambek's lemma). We leave this as an exercise. 

This structure can be used to interpret procedures which share access to a stateful resource such as a reference cell, the creation of multiple copies of such procedures ($(\_)^*$ is a monoidal comonad)  etc.      
Its main limitation is that we have not defined a \emph{commutative} monoid --- evidently it is not the case that $\delta_A;\sym_{A,A} = \delta_A$ (where $\sym_{A,B}:A \otimes B \rightarrow B \otimes A$ is the symmetry isomorphism for the tensor) for any non-empty set $A$. Thus we can only model procedures with shared access to the same stateful object if the order in which they are permitted to access it is predetermined. This is precisely the situation in SCI, where the typing system allows sharing between across sequential composition, but not between functions and their arguments. In order to model sharing of state between functions without this constraint (and build a Cartesian closed category), we need to endow our final coalgebra with the structure of a cofree \emph{commutative} comonoid.  
The category of sets and relations  does not allow this (the cofree commutative comonoid on an object $A$ in $\Rel$ is given by the set of finite multisets of $A$, which is not a final coalgebra). By properly reflecting the interleaving between function calls, game semantics does support a coalgebraic cofree commutative comonoid, leading to models of stateful higher-order languages such as Idealized Algol and core ML. As we shall show by example and counterexample, the richer structure of games also means that the relationship between initial and final coalgebras, and cofree objects is more subtle  (note, for example, that any final coalgebra in $\Rel$ must be bifree, by its self-duality).

\section{Sequoidal categories}

\subsection{Game semantics and the sequoidal operator}

To get around the problems caused by the non-commutativity of the comonoid in the sets-and-relations model, we shall consider a game semantics model, in which we will be able to construct cofree commutative comonoids.  We shall present a form of game semantics in the style of \cite{hyland1997games} and \cite{abramskyjagadeesangames}.  A game will be given by a tuple
\[
  A = (M_A, \lambda_A, b_A, P_A)
  \]
where
\begin{itemize}
  \item $M_A$ is a set of moves.
  \item $\lambda_A\from M_A\to\OP$ is a function designating each move as either an \emph{$O$-move} or a \emph{$P$-move}.
  \item $b_A\in\OP$ is a choice of starting player.
  \item $P_A\subset M_A^*$ is a prefix-closed set of alternating plays (so if $sab\in P_A$ then $\lambda_A(a)=\neg\lambda_A(b)$) such that if $as\in P_A$ then $\lambda_A(a)=b_A$.
\end{itemize}

We call $sa\in P_A$ a \emph{$P$-position} if $a$ is a $P$-move and an \emph{$O$-position} if $a$ is an $O$-move.

A \emph{strategy} for player $P$ for a game $A$ is identified with the set of positions that may arise when playing according to that strategy.  Namely, it is a non-empty prefix-closed subset $\sigma\subset P_A$ satisfying the two conditions:
\begin{description}
  \item[(sO)] If $s\in\sigma$ is a $P$-position and $a$ is an $O$-move such that $sa\in P_A$, then $sa\in\sigma$.
  \item[(sP)] If $sa,sb\in\sigma$ are $P$-positions, then $a=b$.
\end{description}

We shall now concentrate on games $A$ for which $b_A=O$, called \emph{negative games}.  We shall informally describe the standard connectives on negative games:

\begin{description}
  \item[Product] If $(A_i\suchthat i\in I$ is a collection of negative games, then we write $\prod_{i\in I}A_i$ for the game in which player $O$, on his first move, may play in any of the games $A_i$.  From then on, play continues in $A_i$.  When we have defined the category of games, $\prod_{i\in I}A_i$ will be the category-theoretic product of the $A_i$.  If $A_1,A_2$ are games, we write $A_1\times A_2$ for $\prod_{i=1}^2 A_i$.  
  \item[Tensor Product] If $A,B$ are negative games,the tensor product $A\tensor B$ is played by playing the games $A$ and $B$ in parallel, where player $O$ may elect to switch games whenever it is his turn and continue play in the game he has switched to.
  \item[Linear implication] The implication $A\implies B$ is played by playing the game $B$ in parallel with the \emph{negation} of $A$ - that is, the game formed by switching the roles of players $P$ and $O$ in $A$.  Since play in the negation of $A$ starts with a $P$-move, player $O$ is forced to make his first move in the game $B$.  Thereafter, player $P$ may switch games whenever it is her turn.
\end{description}

If $A,B,C$ are negative games, $\sigma$ is a strategy for $A\implies B$ and $\tau$ is a strategy for $B\implies C$, then we may form a strategy $\comp\tau\sigma$ for $A\implies C$ by setting
\[
  \sigma\|\tau = \{\s\in (M_A\cprd M_B\cprd M_C)^*\suchthat \s\vert_{A,B}\in\sigma,\;s\vert_{B,C}\in\tau\}
  \]
and then defining
\[
  \comp\tau\sigma = \{\s\vert_{A,C}\suchthat\s\in\comp\tau\sigma\}
  \]
It is well known (see, for example, \cite{abramskyjagadeesangames}) that $\comp\tau\sigma$ is indeed a strategy for $A\implies C$ and that this form of composition is associative and has an identity.  It is also well known that the resulting category $\G$ of games and strategies has products given by the operator $\times$ and a symmetric monoidal closed structure given by the operations $\tensor$ and $\implies$.  

We turn now to the non-standard \emph{sequoid} connective $\sequoid$.  If $A$ and $B$ are negative games, then the sequoid $A\sequoid B$ is similar to the tensor product $A\tensor B$, but with the restriction that player $O$'s first move must take place in the game $A$.  We observe immediately that we have structural isomorphisms
\begin{gather*}
  \dist\from A\tensor B\toisom (A\sequoid B)\times(B\sequoid A)\\
  \dec\from(A\times B)\sequoid C\toisom (A\sequoid C)\times (B\sequoid C)\\
  \passoc\from (A\sequoid B)\sequoid C\toisom A\sequoid (B\tensor C)
\end{gather*}

One further question to ask is: does the sequoid operator give rise to a functor $\blank\sequoid\blank\from\G\times\G\to\G$, as the tensor operator does?  The answer is no: indeed, let $A,B,C,D$ be negative games, let $\sigma$ be a strategy for $A\implies C$ and let $\tau$ be a strategy for $B\implies D$.  Our aim is to construct a natural strategy $\sigma\sequoid\tau$ for $(A\sequoid B)\implies (C\sequoid D)$.  There is an obvious way to try and do this: player $P$ should play according to the strategy $\sigma$ whenever player $O$'s last move was in $A$ or $C$, and according to $\tau$ whenever player $O$'s last move was in $B$ or $D$.

We show that this does not in general give us a strategy for $(A\sequoid B)\implies (C\sequoid D)$.  Suppose that $\sigma$ is such that player $P$'s response to some opening move in $C$ is another move in $C$ and suppose that $\tau$ is such that player $P$'s response to some opening move in $D$ is a move in $B$ (for example, $\tau$ is a copycat strategy).  Then we end up with the following sequence of events in the game $(A\sequoid B)\implies(C\sequoid D)$  :
\begin{enumerate}
  \item Player $O$ starts with a move in $C$ (as he must).
  \item Player $P$ responds according to $\sigma$ with another move in $C$.
  \item Player $O$ decides to switch games and play a move in $D$.
  \item Player $P$ responds according to $\tau$ with a move in $B$.
\end{enumerate}

But now player $P$'s last move is not a legal move in $(A\sequoid B)\implies(C\sequoid D)$, since no moves have been played in $A$ yet.

We get round this problem by requiring that the strategy $\sigma$ be \emph{strict} -- that is, whatever player $O$'s opening move in $C$ is, player $P$'s reply must be a move in $A$.  

\begin{definition}
  Let $N,L$ be negative games and let $\sigma$ be a strategy for $N\implies L$.  We say that $\sigma$ is \emph{strict} if player $P$'s reply to an opening move in $L$ is always a move in $N$.  
\end{definition}

Identity strategies are strict and the composition of two strict strategies is strict, so we get a full-on-objects subcategory $\G_s$ of $\G$ where the morphisms are strict strategies.  Then the sequoid operator gives rise to a functor:
\[
  \blank\sequoid\blank\from \G_s\times\G\to\G_s
  \]

\subsection{Sequoidal categories}

We now have the motivation required to give the definition of a \emph{sequoidal category} from \cite{laird02}.  

\begin{definition}
  A \emph{sequoidal category} consists of the following data:
  \begin{itemize}
    \item A symmetric monoidal category $\C$ with monoidal product $\tensor$ and tensor unit $I$, associators $\assoc_{A,B,C}\from(A\tensor B)\tensor C\toisom A\tensor(B\tensor C)$, unitors $\runit_A\from A\tensor I\toisom A$ and $\lunit_A\from I\tensor A\toisom A$ and braiding $\sym_{A,B}\from A\tensor B\to B\tensor A$.
    \item A category $\C_s$
    \item A right monoidal category action of $\C$ on the category $\C_s$.  That is, a functor
      \[
        \blank\sequoid\blank\from\C_s\times\C\to\C_s
        \]
      together with natural isomorphisms
      \[
        \passoc_{A,B,C}\from A\sequoid(B\tensor C)\to (A\sequoid B)\sequoid C
        \]
      and
      \[
        \run_A\from A\sequoid I\toisom A
        \]
      subject to the following coherence conditions:
      \begin{equation*}
        \begin{tikzcd}
          A\sequoid(B\tensor(C\tensor D)) \arrow[r, "\passoc_{A,B,C\tensor D}" yshift=0.3em] \arrow[d, "\id_A\sequoid \assoc_{B,C,D}"']
            & (A \sequoid B) \sequoid (C\tensor D) \arrow[r, "\passoc_{A\sequoid B,C,D}" yshift=0.3em]
              & ((A\sequoid B)\sequoid C) \sequoid D \\
          A\sequoid((B\tensor C)\tensor D) \arrow[r, "\passoc_{A,B\tensor C,D}"' yshift=-0.3em]
            & (A\sequoid (B\tensor C)) \sequoid D \arrow[ur, "\passoc_{A,B,C}\sequoid\id_D"']
              &
        \end{tikzcd}
      \end{equation*}
      \begin{equation*}
        \begin{tikzcd}
          A \sequoid (I\tensor B) \arrow[r, "\passoc_{A,I,B}" yshift=0.3em] \arrow[d, "\id_A\sequoid\lunit_B"']
            & (A\sequoid I)\sequoid B \arrow[dl, "\run_A\sequoid\id_B"] \\
          A \sequoid B
            &
        \end{tikzcd}
        \quad
        \begin{tikzcd}
          A \sequoid (B\tensor I) \arrow[r, "\passoc_{A,B,I}" yshift=0.3em] \arrow[d, "\id_A\sequoid\runit_B"']
            & (A\sequoid B) \sequoid I \arrow[dl, "\run_{A\sequoid B}"] \\
          A\sequoid B
            &
        \end{tikzcd}
      \end{equation*}

      \item A functor $J\from \C_s\to\C$ (in the games example, this is the inclusion functor $\G_s\to\G$)

      \item A natural transformation $\wk_{A,B}\from J(A)\tensor B\to J(A\sequoid B)$ satisfying the coherence conditions:
      \begin{equation*}
        \begin{tikzcd}
          A \tensor I \arrow[r, "\runit_A" yshift=0.3em] \arrow[d, "\wk_{A,I}"']
            & A \\
          A \sequoid I \arrow[ur, "J(\run_A)"']
            &
        \end{tikzcd}
        \quad
        \begin{tikzcd}
          (A \tensor B) \tensor C \arrow[r, "\wk_{A,B}\tensor\id_C" yshift=0.3em] \arrow[d, "\assoc_{A,B,C}"']
            & (A \sequoid B) \tensor C \arrow[r, "\wk_{A\sequoid B, C}" yshift=0.3em]
              & (A \sequoid B) \sequoid C\\
          A \tensor (B \tensor C) \arrow[r, "\wk_{A,B\tensor C}"']
            & A \sequoid (B \tensor C) \arrow[ur, "J(\passoc_{A,B,C})"']
              &
        \end{tikzcd}
      \end{equation*}
  \end{itemize}
\end{definition}

Our category of games satisfies further conditions:

\begin{definition}
  Let $\C=(\C,\C_s,J,\wk)$ be a sequoidal category.  We say that $\C$ is an \emph{inclusive sequoidal category} if $\C_s$ is a full-on-objects subcategoryof $\C$ containing all isomorphisms in $\C$ and the morphisms $\wk_{A,B}$ and $J$ is the inclusion functor.

  If $\C$ is an inclusive sequoidal category, we say that $\C$ is \emph{Cartesian} if $\C_s$ has all products and these are preserved by $J$.  In that case, we say that $\C$ is \emph{decomposable} if the natural transformations
  \begin{gather*}
    \dec_{A,B} = \langle \wk_{A,B}, \comp{\wk_{A,B}}{\sym_{A,B}}\rangle\from A\tensor B\to (A\sequoid B)\times (B\sequoid A) \\
    \dec^0 \from I \to 1
  \end{gather*}
  are isomorphisms and we say that $\C$ is \emph{distributive} if the natural transformations
  \begin{gather*}
    \dist_{A,B,C} = \langle \pr_1\sequoid \id_C,\pr_2\sequoid\id_C\rangle\from (A\times B)\sequoid C\to (A\sequoid C)\times (B\sequoid C) \\
    \dist_{(A_i\colon i\in I),C} = \langle (\pr_i\sequoid\id_C\suchthat i\in I)\rangle \from \left(\prod_{i\in I} A_i\right) \sequoid C \to \prod_{i\in I}(A_i\sequoid C) \\
    \dist_{A,0}\from 1\sequoid A\to 1
  \end{gather*}
  are isomorphisms.
\end{definition}
\begin{definition}
  Let $\C=(\C,\C_s,J,\wk)$ be a sequoidal category.  We say that $\C$ is an \emph{inclusive sequoidal category} if $\C_s$ is a full-on-objects subcategory of $\C$ containing all isomorphisms and finite products of $\C$, and the morphisms $\wk_{A,B}$ and $J$ is the inclusion functor.


%  If $\C$ is an inclusive sequoidal category, we say that $\C$ is \emph{Cartesian} if $\C_s$ has all products and these are preserved by $J$.
 We say that $\C$ is \emph{decomposable} if for any $A$ and $B$, the tensor product $A \tensor B$ is a cartesian product of $A \sequoid B$ and $B \sequoid A$, with projections $\wk_{A,B}:A \tensor B \rightarrow A \sequoid B$ and  $\comp{\wk_{A,B}}{\sym_{A,B}}:A \tensor B \rightarrow B \sequoid A$, and if the product $A \times B$ exists, then $(A \times B) \sequoid C$ is the product of $A \sequoid C$ and $B \sequoid C$, with projections $\pr_l \sequoid \id_C,\pr_r \sequoid \id_C$. 
So if $\C$ has all finite products, 
the natural transformations
  \begin{gather*}
    \dec_{A,B} = \langle \wk_{A,B}, \comp{\wk_{A,B}}{\sym_{A,B}}\rangle\from A\tensor B\to (A\sequoid B)\times (B\sequoid A) \\
   % \dec^0 \from I \to 1 \\
    \dist_{A,B,C} = \langle \pr_1\sequoid \id_C,\pr_2\sequoid\id_C\rangle\from (A\times B)\sequoid C\to (A\sequoid C)\times (B\sequoid C) \\
    \dist_{A,0}\from 1\sequoid A\to 1
  \end{gather*}
  are isomorphisms.
\end{definition}

We shall also use the fact that our category of games is \emph{affine} - so the natural transformation $\dec^0\from I \to 1$ is an isomorphism.  This is not strictly necessary, and techniques are available to obtain similar results in the non-affine case (see \cite{jimNonAffine}, for example), but it will greatly simplify our presentation.

The games model satisfies an analog of monoidal closedness:

\begin{definition}
  Let $\C=(\C,\C_s,J,\wk)$ be an inclusive sequoidal category.  We say that $\C$ is a \emph{sequoidal closed category} if $\C$ is monoidal closed (with internal hom $\implies$ and currying $\Lambda_{A,B,C}\from \C(A\tensor B,C)\toisom \C(A,B\implies C)$) and if the map $f\mapsto\Lambda(\comp{f}{\wk})$ gives rise to a natural transformation
  \[
    \Lambda_{A,B,C,s}\from \C_s(A\sequoid B, C) \to \C_s(A,B\implies C)
    \]
\end{definition}

It can be shown (see for example \cite{martinsthesis}) that our category $\G$ of games has all this structure.

\begin{theorem}
  Let $J$ be the inclusion functor $\G_s\to\G$.  If $A,B$ are games, let $\wk_{A,B}\from A\tensor B\to A\sequoid B$ be the natural copycat strategy.  Then
  \[
    (\G,\G_s,J,\wk)
    \]
  is an inclusive, Cartesian, decomposable, distributive sequoidal closed category.
\end{theorem}

\subsection{The sequoidal exponential}

There are several ways to add exponentials to the basic category of games.  We shall use the definition based on countably many copies of the base game (see \cite{laird02}, for example):

\begin{definition}
  Let $A$ be a negative game.  The \emph{exponential} of $A$ is the game $\oc A = (M_{\oc A}, \lambda_{\oc A}, b_{\oc A}, P_{\oc A})$, where $M_{\oc A}, \lambda_{\oc A}, b_{\oc A}, P_{\oc A}$ are defined as follows:
  \begin{itemize}
    \item $M_{\oc A} = M_A \times \omega$
    \item $\lambda_{\oc A} = \lambda_A \circ \pr_1$
    \item $b_{\oc A} = O$
    \item Given a sequence $s\in M_{\oc A}^\omega$, we write $s\vert_n$ for the largest sequence $a_1a_2\dots a_k\in M_A^*$ such that $(a_1,n),(a_2,n),\dots(a_k,n)$ is a subsequence of $s$.  Then $P_{\oc A}$ is the set of all sequence $s\in M_{\oc A}^\omega$ that are alternating with respect to $\lambda_{\oc A}$, such that $s\vert_n\in P_A$ for all $n$ and such that if $m<n$ and $(a,n)$ occurs in $s$ then $(b,m)$ must occur earlier in $s$ for some move $b$: in other words, player $O$ can start infinitely many copies of the game $A$, but he must start them in order.
  \end{itemize}
\end{definition}

This last condition on the order in which games may be opened is very important, as it allows us to define morphisms that give $\oc A$ the semantics of the exponential from linear logic.  For example, we have a natural morphism $\mu\from\oc A\to\oc A\tensor\oc A$, given by the copycat strategy that starts a new copy of $A$ on the left whenever one is started on the right.  Because of the condition on the order in which copies of $A$ may be started, there is a unique way to do this.

\begin{proposition}
  $\mu$ exhibits $\oc A$ as a comonoid in the monoidal category $(\G, \tensor, I)$.  
\end{proposition}
\begin{proof}
  $\mu$ shall be the comultiplication in our comonoid.  The counit is given by the empty strategy $\eta\from\oc A\to I$.  We just need to check that $\mu$ is associative and that $\eta$ is a counit for $\mu$.  

  For associativity, we need to show that the following diagram commutes:
  \[
    \begin{tikzcd}
      \oc A \arrow[rr, "\mu"] \arrow[d, "\mu"']
        &
          & \oc A \tensor \oc A \arrow[d, "\id_{\oc A}\tensor\mu"] \\
      \oc A \tensor \oc A \arrow[r, "\mu\tensor\id_{\oc A}" yshift=0.2em]
        & (\oc A \tensor \oc A) \tensor \oc A \arrow[r, "\assoc_{\oc A,\oc A,\oc A}"' yshift=-0.4em]
          & \oc A \tensor (\oc A \tensor \oc A)
    \end{tikzcd}
    \]
  This is easy to see when we notice that both branches of the square are copycat strategies on $\oc A\implies\oc A\tensor(\oc A\tensor \oc A)$; since copies of $A$ in $\oc A$ must be started in sequence, there is a unique such strategy, and so the square commutes.

  For the counit, we need to show that the follosing two diagrams commute:
  \[
    \begin{tikzcd}
      \oc A \arrow[r, "\mu"] \arrow[dr, "\runit_A\inv"']
        & \oc A \tensor \oc A \arrow[d, "\id_{\oc A}\tensor \eta"] \\
      %
        & \oc A \tensor I
    \end{tikzcd}
    \quad\quad\quad
    \begin{tikzcd}
      \oc A \arrow[r, "\mu"] \arrow[dr, "\lunit_A\inv"']
        & \oc A \tensor \oc A \arrow[d, "\eta\tensor\id_{\oc A}"] \\
      %
        & I \tensor \oc A
    \end{tikzcd}
    \]
  Once again, these diagrams commute because both branches are copycat strategies for $\oc A\implies\oc A\tensor I$ or $\oc A\implies I\tensor\oc A$ and there is a unique such strategy in each case.
\end{proof}

We shall later show that $(\oc A, \mu, \eta)$ is in fact the \emph{cofree commutative comonoid} on $A$ in the monoidal category $(\G, \tensor, I)$.  

We shall call the exponential $\oc A$ the \emph{sequoidal exponential}.  The following proposition explains the name:

\begin{proposition}
  Let $A$ be a negative game.  Then we get an endofunctor $A\sequoid\blank$ on $\G$ given by sending $B$ to $A\sequoid B$.  

  The sequoidal exponential $\oc A$, together with the obvious copycat strategy $\alpha_A\from\oc A\to A\sequoid\oc A$, is the final coalgebra for the endofunctor $A\sequoid\blank$.  In other words, if $B$ is a negative game and $\sigma\from B\to A\sequoid B$ is a morphism then there is a unique morphism $\fcoal{\sigma}\from B\to \oc A$ such that the following diagram commutes:
  \[
    \begin{tikzcd}
      B \arrow[r, "\sigma"] \arrow[d, "\fcoal{\sigma}"']
        & A \sequoid B \arrow[d, "\id_A\sequoid\fcoal{\sigma}"] \\
      \oc A \arrow[r, "\alpha"']
        & A \sequoid \oc A
    \end{tikzcd}
    \]
  We call $\fcoal{\sigma}$ the \emph{anamorphism} of $\sigma$.
\end{proposition}
\begin{proof}
  See \cite{martinsthesis}.  We shall shortly give a proof in the more general case.
\end{proof}

We shall use the following standard pieces of theory about final coalgebras.  
\begin{description}
  \item[Lambek's Lemma] $\alpha_A$ is an isomorphism, with inverse given by the anamorphism of the map $\id\sequoid\alpha_A\from A\sequoid\oc A\to A \sequoid (A \sequoid \oc A)$ \cite{Lambek}.  In particular, $\alpha_A$ is a morphism in $\G_s$.  In the general case, we deduce that $\alpha_A$ is a morphism in $\C_s$.  
  \item[Final Sequence] We may construct a transfinite sequence of objects and morphisms between them (in other words, a functor $\Ord\to\G$, where $\Ord$ is the category of ordinals and prefix inclusions:
    \[
      \begin{tikzcd}
        1
          & A \arrow[l, "*"']
            & A \sequoid A \arrow[l, "\id\sequoid *"']
              & A \sequoid (A \sequoid A) \arrow[l, "\id\sequoid(\id\sequoid*)"']
                & \cdots \arrow[l] \\
        A^{\sequoid\omega} \arrow[u] \arrow[ur] \arrow[urr] \arrow[urrr] \arrow[phantom, urrrr, "\cdots" xshift=0.6em]
          & A \sequoid A^{\sequoid\omega} \arrow[l]
            & A \sequoid (A \sequoid A^{\sequoid\omega}) \arrow[l]
              & A \sequoid (A \sequoid (A \sequoid A^{\sequoid\omega})) \arrow[l]
                & \cdots \arrow[l] \\[-24pt]
        \vdots
          & \vdots
            & \vdots
              & \vdots
                &
      \end{tikzcd}
      \]
    Here, $A^{\sequoid\omega}$ is the categorical limit of the top line and the morphisms into the top line are the morphisms in the limiting cone.  The morphism from $A\sequoid A^{\sequoid\omega}$ to $A^{\sequoid\omega}$ is constructed as follows: apply the functor $A\sequoid\blank$ to the limiting cone from $A^{\sequoid\omega}$, giving us a cone from $A\sequoid A^{\sequoid\omega}$ over the top line.  The desired morphism is now the unique morphism $A\sequoid A^{\sequoid\omega}\to A^{\sequoid\omega}$ that induces a morphism of cones.  We may continue in this way to build up $A^{\sequoid\gamma}$ for all ordinals $\gamma$, where $A^{\sequoid(\gamma+1)}=A\sequoid A^{\sequoid\gamma}$ and $A^{\sequoid\mu}$ is the limit over the $A^{\sequoid\gamma}$ for $\gamma<\mu$ if $\mu$ is a limit ordinal.

    If the morphism $j_{\gamma}^{\gamma+1}\from A\sequoid A^{\sequoid\gamma}\to A^{\sequoid\gamma}$ is an isomorphism for some $\gamma$, then we say that the final sequence \emph{stabilizes at $\gamma$}.  In this case, ${j_{\gamma}^{\gamma+1}}\inv\from A^{\sequoid\gamma}\to A\sequoid A^{\sequoid\gamma}$ is the final coalgebra for the functor $A\sequoid\blank$ \cite{finalseq}.

    The same is true for any endofunctor on any category with a terminal object and enough limits.
\end{description}

\subsection{Imperative programs as anamorphisms}

We may use anamorphisms to construct (history-sensitive) strategies corresponding to stateful programs in an entirely coalgebraic way.

Let $\Sigma$ be the game
\[
  (\{q,a\},\{q\mapsto O,a\mapsto P\},O,\{\emptyplay,q,qa\})
  \]
and let $\bN$ be the game
\[
  \{q\}\cup\bN,\{q\mapsto O,\;n\mapsto P\},O,\{\emptyplay,q\}\cup\{qn\suchthat n\in\bN\})
  \]
That is, $\Sigma$ is the game where player $O$ makes the move $q$ and player $P$ must then reply with the move $a$, while $\bN$ is the game where player $O$ plays the move $q$ and then player $P$ must choose a natural number $n$ to play.  We model a simple stateful program as a history sensitive strategy on $\oc(\Sigma\times\bN)$: the program interface will consist of a button that can be pressed, and a display that can be activated to display the number of times that the button has been pressed.  As a strategy on $\oc(\Sigma\times\bN)$, whenever player $O$ plays $q$ in $\Sigma$, player $P$ responds with the move $a$.  Whenever he plays $q$ in $\bN$, she responds with the number of times we have played in $\Sigma$ so far.

We can construct this strategy using nothing more than the sequoidal structure on $\G$ that we have described and some very basic strategies on the games $\bN$ and $\Sigma$; namely:
\begin{gather*}
  \OK \from I \to \Sigma \\
  \succ \from \bN \to \bN \\
  \zero \from I \to \bN
\end{gather*}
Here, $\OK$ is the strategy that replies $a$ to player $O$'s initial move $q$, $\zero$ is the strategy that replies $0$ to player $O$'s initial move $q$ and $\succ$ is the strategy that queries its argument and then returns the number one greater (so maximal plays in $\succ$ are of the form $qqn(n+1)$ for $n\in\bN$).  

We first define a morphism $\mathtt{press}$ from $\oc \bN$ to $\Sigma\sequoid\oc \bN$ as the composite:
\[
  \begin{tikzcd}
    \oc\bN \arrow[r, "\lunit"]
      & I \tensor \oc \bN \arrow[r, "\OK\tensor\oc\succ"]
        &[24pt] \Sigma\tensor\oc\bN \arrow[r, "\wk"]
          & \Sigma \sequoid \oc \bN
  \end{tikzcd}
  \]
In this strategy, the player responds to the initial move $q$ in $\Sigma$ with $a$; from then on, she copies from the $\oc\bN$ to $\oc\bN$, increasing each argument by $1$ before playing it on the right.  This strategy models the effect of a single button press.

We now define a morphism from $\oc\bN$ to $(\bN\times\Sigma)\sequoid\oc \bN$ by the composite:
\[
  \begin{tikzcd}
    \oc \bN \arrow[r, "\Delta"]
      & \oc \bN \times \oc \bN \arrow[r, "\alpha\times\mathtt{press}"]
        &[20pt] \bN \sequoid \oc \bN \;\times\; \Sigma \sequoid \oc \bN \arrow[r, "\dist\inv"]
          &[12pt] (\bN \times \Sigma) \sequoid \oc \bN
  \end{tikzcd}
  \]
In this strategy, if player $O$ starts with a move in $\bN$, then player $P$ copies plays in $\oc \bN$ on the left and copies over the response.  From then on, she continues to copy numbers from the left over to the right.  If player $O$ starts by playing in $\Sigma$, then player $P$ responds with the move $a$.  From then on, she copies numbers from the left over to the right, but now she increases the numbers by $1$ each time.  

This strategy represents a single user interaction (either pressing the button or checking how many times it has been pressed), together with the change of state (represented by the game $\oc \bN$) that takes place after that interaction has taken place.  We now take the anamorphism of this strategy, giving us a unique morphism $\mathtt{count}$ from $\oc \bN$ to $\oc (\bN\times\Sigma)$ making the following diagram commute:
\[
  \begin{tikzcd}
    \oc \bN \arrow[r, "\Delta"] \arrow[d, "\mathtt{count}"']
      & \oc \bN \times \oc \bN \arrow[r, "\alpha\times\mathtt{press}"]
        &[20pt] \bN \sequoid \oc \bN \;\times\; \Sigma \sequoid \oc \bN \arrow[r, "\dist\inv"]
          &[12pt] (\bN \times \Sigma) \sequoid \oc \bN \arrow[d, "\id\sequoid\mathtt{count}"] \\
    \oc (\bN\times\Sigma) \arrow[rrr, "\alpha"]
      &
        &
          & (\bN \times \Sigma) \sequoid \oc (\bN \times \Sigma)
  \end{tikzcd}
  \]
In the strategy $\mathtt{count}$, if player $O$ plays $q$ in a copy of $\Sigma$, then player $P$ responds with $a$ and adds $1$ to an (invisible) counter variable.  If player $O$ plays $q$ in a copy of $\bN$, then player $P$ queries the argument on the left and returns that value, plus her count, on the right.  If we now substitute in the initial value of the state by forming the composite $\comp{\mathtt{count}}{\oc\zero}$, then we end up with the desired behaviour.

A more consequential example is the construction of a strategy representing a storage cell.  This is the strategy $\cell$ for $\oc(\Var[X])$ that is used in \cite{SamsonGuyIAPassive} to construct the denotation of the $\mathtt{new}$ term from Idealized Algol.  Using this strategy, it is possible to build the model of Idealized Algol from \cite{SamsonGuyIAPassive} and hence construct a wealth of other stateful objects.  The benefit of constructing $\cell$ in this way, rather than directly, is that we can now reason about it coalgebraically, rather than by direct combinatorial arguments on the strategy.

Let $(X,*)$ be a pointed set and write $X$ for the game with maximal plays $qx$ for $x\in X$.  Recall that in Idealized Algol we represent $\Var[X]$, the type of variables taking values in $X$, by the game $\Sigma^X\times X$, where $\Sigma$ denotes the command type $\mathtt{com}$ and $\Sigma^X$ is the $X$-fold product of $\Sigma$ with itself.  Here, $\Sigma^X$ represents the act of writing a value into the storage cell (so playing in $\Sigma_x$ means writing the value $x$), while the copy of $X$ represents reading a value from the storage cell.  

We want to construct the strategy $\cell$ for $\oc(\Sigma^X\times X)$ that will remember what value we have written into the cell and will return the value when we request it.  In the case that we request the value in the cell when nothing has been written to it, we return the default value $*$.

We shall represent the state of the storage cell by the game $X$, and we shall construct a state transformer on $X \implies (\Sigma^X\times X)\sequoid X$ that will allow us to recover the $\cell$ strategy as an anamorphism.  

For each $x\in X$, we have a strategy $c_x$ for $I\implies X$ with maximal play $qx$.  Now we construct a morphism $\wwrite(x)$ from $\oc X$ to $\Sigma\sequoid\oc X$ as the composite:
\[
  X \xrightarrow{*} 1 \xrightarrow{{(\dec^0)}\inv} I \xrightarrow{\runit_I} I \tensor I \xrightarrow{\OK\tensor c_x} \Sigma \tensor X \xrightarrow{\wk_{\Sigma,X}} \Sigma \sequoid X
  \]
This strategy corresponds to filling the cell with the value $x$.  Consequently, we ignore the previous value from the cell (the copy of $X$ on the left) and we respond in the copy of $X$ on the right with $x$.

We get a strategy:
\[
  \wwrite \from \oc X \xrightarrow{\langle \wwrite(x)\suchthat x\in X\rangle} (\Sigma \sequoid \oc X)^X \xrightarrow{\dist_{(\Sigma\colon x\in X),\oc X}\inv} \Sigma^X\sequoid\oc X
  \]

We also want a strategy $\read$ for $X \implies X \sequoid X$.  It doesn't appear to be possible to construct this strategy from the sequoidal axioms, but it is easy enough to say what it is: it is the strategy that returns the value of the state while leaving the state unchanged.  A typical play in $\read$, therefore, might have the following form:
\[
  \begin{array}{ccccc}
    X & \implies & X & \sequoid & X \\
    && q && \\
    q &&&& \\
    x &&&& \\
    && x && \\
    &&&& q \\
    &&&& x
  \end{array}
  \]
Note that the content of the state (the copy of $X$ on the left) is copied into both the output (the first copy of $X$ on the right) and into the new state (the second copy of $X$ on the right).  

We put these strategies together to form our state transformer:
\[
  \cell'\from \oc X \xrightarrow{\langle\wwrite,\read\rangle} \Sigma^X\sequoid\oc X \;\times\;X\sequoid\oc X \xrightarrow{\dist_{\Sigma^X,X,\oc X}} (\Sigma^X\times X)\sequoid \oc X
  \]
When we take the anamorphism $\fcoal{\cell'}$ of this strategy, we get the strategy $\oc X \to \oc (\Sigma^X\times X)$ that, when player $O$ plays in $\Sigma^X$, stores the appropriate element of $X$ into the (invisible) state.  When player $O$ plays in $X$ on the right, player $P$ responds with the current value held in the state.  In the case that player $O$ plays in $X$ without having first played in $\Sigma^X$, we return the value of $X$ from the left.  Therefore, our desired strategy $\cell$ is given by:
\[
  \cell = \comp{\fcoal{\cell'}}{c_*}
  \]

\begin{exercise}
  Let $(X,*)$ be a pointed set, where $*$ is a designated error element, and write $X$ for the game with maximal plays $qx$ for $x\in X$.  Consider a history-sensitive strategy on $\oc(\Sigma^X\times X)$ representing a simple stack with $\mathtt{push(x)}$ and $\mathtt{pop()}$ methods.  The $\mathtt{push(x)}$ method should add an element $x\in X$ on to the stack, while the $\mathtt{pop()}$ method should return the top element of the stack, removing it from the stack in the process, or return $*$ if the stack is empty.  Show that this strategy may be constructed from the strategy $\OK$ on $\Sigma$ and the strategies $c_x$ on $X$, using only the sequoidal structure of $\G$.  

  Consider how we might add a $\mathtt{size()}$ method, of type $\bN$, to this stack, returning the number of elements currently on the stack.
\end{exercise}

\section{Constructing cofree commutative comonoids in Cartesian sequoidal categories}

\subsection{A formula for the sequoidal exponential}

We observed that the exponential $\oc A$ of a game $A$ arises as the final coalgebra for the functor $A\sequoid\blank$.  We also observed that $\oc A$ has the structure of a cofree commutative comonoid on $A$.  In this section, we shall consider various generalizations of this result that hold in sequoidal categories.  

We shall first consider the formula  given by Melli\'es, Tabareau and Tasson \cite{MelliesCofCommCom}, which does not depend on the presence of cartesian products, but obtains the cofree commutative comonoid as a limit of \emph{symmetric tensor powers}.
\begin{definition}If $A$ is an object in a symmetric monoidal category, a $n$-fold symmetric tensor power of $A$ is an  \emph{equalizer} $(A^n,\eq)$ for the group $G$ of symmetry automorphisms on $A^{\otimes n}$. A tensor power is preserved by the tensor product if $(B\otimes A^n,\eq \otimes B)$ is an equalizer for the automorphisms $\{B \otimes g\ |\ g \in G\}$.
\end{definition}
In any affine category\footnote{This is a special case of the situation considered in  \cite{MelliesCofCommCom}: that $A$ is a ``free pointed object''.} with tensor powers of $A$ we may define a diagram $\Delta(A) = $
$$I \stackrel{p_0}{\leftarrow} A \stackrel{p_1}{\leftarrow} A^2 \ldots A^i \stackrel{p_i}{\leftarrow} A^{i+1} \ldots$$
where   
$p_i:A^{i+1} \rightarrow A^i$ is the unique morphism given by the universal property of the symmetric tensor power,  such that $\comp{\eq_i:A^{i+1}}{p_i} \rightarrow A^{\otimes i} = \eq_{i+1};(A^{\otimes i} \otimes t_A)$. 

Melli\'es, Tabareau and Tasson \cite{MelliesCofCommCom} have shown that where the limit $(A^\infty, \{p^\infty_i\from A^\infty \rightarrow A^i\}$ for this diagram exists  and commutes with the tensor,  --- i.e. for each object $B$, $B \otimes A^\infty$ is the limit of 
$$B \otimes I \stackrel{B \otimes p_0}{\leftarrow} B \otimes A  \stackrel{B \otimes p_1}{\leftarrow} B\otimes  A^2 \ldots $$
then a comultiplication $\mu:A^\infty \rightarrow A^\infty \otimes A^\infty$ may be defined making $(A^\infty,\mu,t_{\oc A})$ the cofree commutative comonoid. Where these conditions are satisfied, we shall call this a MTT-exponential.   
\begin{proposition}Any sequoidally decomposable category has all symmetric tensor powers, and these are preserved by the tensor.  
\end{proposition} 
\begin{proof}
By sequoidal decomposability, for any $n$, $A^{\otimes (n+1)}$ is the cartesian product $\Pi_{i \leq n} (A \sequoid A^{\otimes n})$ with projections 
  $\comp{\sym_i}{\wk_{A,A^{\otimes n}}} $, where  $\sym_i: A^{\tensor (n+1)} \rightarrow A^{\tensor (n+1)}$ is the symmetry isomorphism corresponding to the permutation on $n$ which swaps $1$ and $i$. 

  We inductively define the sequoid powers $A^{\sequoid n}$ by $A^{\sequoid 1}=A$ and $A^{\sequoid(n+1)}=A\sequoid A^{\sequoid n}$.  Given $n$, we inductively define a morphism $\eq_n\from A^{\sequoid n}\to A^{\tensor n}$ as the diagonal $\langle \id_A\sequoid\eq_{n-1}\rangle$ into the product -- so $\comp{\wk}{\comp{\sym_i}{\eq_n}}=\id\sequoid e_{n-1}$ for each $i$.  
  
  If $\pi\in S_n$ is a permutation, we write $\sym^\pi$ for the appropriate symmetry of $A^{\tensor n}$.  We now claim that $\comp{\sym^\pi}{\eq_n}=\eq_n$ for all $\pi\in S_n$ -- so $\eq_n$ equalizes the $\sym^\pi$.  Indeed, let $\pi\in S_n$.  Then we may write $\sym^\pi = \comp{\id_A\tensor\sym^\rho}{\sym_i}$ for some $i$ and some $\rho\in S_{n-1}$.  Now we have:
  \begin{IEEEeqnarray*}{rClC}
    \comp{\wk}{\comp{\sym^\pi}{\eq_n}} & = & \comp{\wk}{\comp{\comp{(\id\tensor\sym^\rho)}{\sym_i}}{\eq_n}} & \\
    & = & \comp{(\id\sequoid\sym^\rho)}{\comp{\wk}{\comp{\sym_i}{\eq_n}}} & \hspace{24pt}\textrm{(by naturality of $\wk$)} \\
    & = & \comp{(\id\sequoid\sym^\rho)}{(\id\sequoid\eq_{n-1})} & \\
    & = & \id\sequoid\eq_{n-1}
  \end{IEEEeqnarray*}
  Since $\pi$ was arbitrary, it follows that $\comp{\wk}{\comp{\comp{\sym_j}{\sym^{\pi}}}{\eq_n}}=\comp{\comp{\wk}{\sym_j}}{\eq_n}$ for all $j$ and therefore that $\comp{\sym^\pi}{\eq_n}=\eq_n$ for all $\pi$, as desired.

  Now define $\wk^n\from A^{\sequoid n}\to A^{\tensor n}$ inductively by $\wk^n = \comp{\id\sequoid\wk^{n-1}}{\wk}$.  We may show by induction that $\comp{\wk^n}{\eq_n}=\id_{A^{\sequoid n}}$ for all $n$: indeed, we have
  \begin{IEEEeqnarray*}{rClC}
    \comp{\wk^n}{\eq_n} & = & \comp{(\id\sequoid\wk^{n-1})}{\comp{\wk}{\eq_n}} & \\
    & = & \comp{(\id\sequoid\wk^{n-1})}{(\id\sequoid\eq_{n-1})} & \\
    & = & \id\sequoid \id = \id & \hspace{24pt}\textrm{(by induction)}
  \end{IEEEeqnarray*}
  Now let $f\from C \to B \tensor A^{\tensor n}$ be such that $\comp{(\id\tensor\sym^\pi)}{f}=f$ for all $\pi\in S_n$.  It follows from what we have just shown that if $f=\comp{(\id\tensor\eq_n)}{g}$, then $g=\comp{\comp{\id\tensor\wk^n}{\id\tensor\eq_n}}{g}=\comp{\id\tensor\wk^n}{f}$.  So we just need to show that
  \[
    f=\comp{(\id\tensor(\comp{\eq_n}{\wk_n}))}{f}
    \]
  We first assume that $B=I$, so we have $f\from C\to B\tensor A^{\tensor n}$ and $\comp{\sym^\pi}{f}=f$ for all $\pi\in S_n$ and we are trying to show that $f=\comp{\comp{\eq_n}{\wk^n}}{f}$.  We do this by showing that $\comp{\comp{\wk}{\sym_i}}{\comp{\comp{\eq_n}{\wk^n}}{f}}=\comp{\comp{\wk}{\sym_i}}{f}$ for all $i$.  

  Indeed, we have:
  \begin{IEEEeqnarray*}{rClC}
    \comp{\comp{\wk}{\sym_i}}{\comp{\comp{\eq_n}{\wk^n}}{f}} & = & \comp{\comp{(\id\sequoid\eq_{n-1})}{(\id\sequoid\wk^{n-1})}}{\comp{\wk}{f}} & \\
    & = & \comp{\wk}{\comp{(\id\tensor(\comp{\eq_{n-1}}{\wk^{n-1}}))}{f}} &\hspace{24pt}\textrm{(by naturality of $\wk$)} \\
    & = & \comp{\wk}{f} &\hspace{2pt}\textrm{(by induction)} \\
    & = & \comp{\wk}{\comp{\sym_i}{f}}
  \end{IEEEeqnarray*}
  
  Now let $B$ be an arbitary object of the category.  [TODO: finish working this out.]
\end{proof}
Thus, in any sequoidally decomposable category, the diagram $\Delta(A)$ exists for any $A$. If a limit for this diagram exists and is preserved by the sequoid, 
--- i.e. for any $B$, $B \sequoid A^\infty$ is the limit for $B \sequoid \Delta(A)$ --- then it is preserved by the tensor, and is therefore the cofree commutative comonoid. Conversely, we may show that any cofree commutative comonoid which arises as a $\otimes$-preserving limit of symmetric tensor powers is a final coalgebra.  
\begin{proposition}If a sequoidally decomposable category has a MTT-exponential, then $(A^\infty, \comp{\wk_{A\tensor\oc A}}{\comp{\der_A}{\mu_A}})$ is a final coalgebra for the functor $A \sequoid \_$.    
\end{proposition}
\begin{proof}
  Observe that in a sequoidally decomposable category, the morphism $\wk_{A,A^n}:A \sequoid A^n: \rightarrow A^{n+1}$ is a section (we may define the corresponding retraction inductively from the decomposition of the tensor).   Hence if   the limit $A^\infty$ is preserved by the functor $A \tensor \_$, it is preserved by the sequoid $A \sequoid\_$ --- i.e. $A^\infty$ is the limit of the chain $A \sequoid \Delta = \Delta$. 

  Thus, for  any  $A \sequoid\_$-coalgebra $f\from B \rightarrow A \sequoid B$, we may define a unique coalgebra morphism $\fcoal{f}\from B \rightarrow \oc A$ as the mediating morphism of the cone $\{f_i\from B \rightarrow A^i\ |\ i \in \omega\}$, where  $f_0 = t_B$ and $f_{i+1} = f;(A \sequoid f_i)$.  
\end{proof}

\subsection{Win-games and winning strategies}

The construction from \cite{MelliesCofCommCom} covers a lot of different cases, but there are some situations in which it does not apply.  One example is that of \emph{win-games}, or games with a winning condition (\cite{abramskyjagadeesangames}, \cite{martinsthesis}).  Given a game $A$, we write $\overline{P_A}$ to be the limit-closure of $P_A$ -- that is, $P_A$ together with the set of infinite sequences, all of whose finite prefixes are in $P_A$.  A \emph{win-game} is a game $A$ together with a function $\zeta_A\from \overline{P_A}\to\OP$ such that:
\begin{itemize}
  \item $\zeta_A(\emptyplay) = \neg b_A$
  \item $\zeta_A(sa) = \lambda_A(a)$
\end{itemize}
Thus, $\zeta_A$ is entirely determined on $P_A$, and the only new information is the values that $\zeta_A$ takes on the infinite positions in $\overline{P_A}$.  The reason we bother to define $\zeta_A$ on finite positions at all is so that we can define it on the connectives:
\begin{gather*}
  \zeta_{\prod_{i\in I}A_i}(s) = \bigwedge_{i\in I}\zeta_{A_i}(s\vert_{A_i}) \\
  \zeta_{A\tensor B}(s) = \zeta_A(s) \wedge \zeta_B(s) \\
  \zeta_{A\sequoid B}(s) = \zeta_A(s) \wedge \zeta_B(s) \\
  \zeta_{A \implies B}(s) = \zeta_A(s) \Rightarrow \zeta_B(s) \\
  \zeta_{\oc A}(s) = \bigwedge_{i\in I}(\zeta_A(s\vert_i))
\end{gather*}

Here, $\wedge$ and $\Rightarrow$ are the usual propostional connectives on $\{T,F\}$, where we identify $T$ with $P$ and $F$ with $O$.  

We define a \emph{winning strategy} on $(A,\zeta_A)$ to be a total strategy $\sigma$ on $A$ such that $\zeta_A(s)=P$ whenever $s$ is an infinite sequence, all of whose finite prefixes are in $\sigma$.  It is known (see \cite{abramskyjagadeesangames}) that the composition of winning strategies is winning and that we get a decomposable, distributive sequoidal closed category $\W$ with $\oc A$ as the final coalgebra for $A\sequoid\blank$ and the cofree commutative comonoid over $A$ \cite{martinsthesis}.

However, in this case, $\oc A$ is not the sequential limit of the symmetrized tensor powers over $A$.  Since $\W$ is a decomposable, distributive sequoidal category, the symmetrized tensor powers of $A$ are given by the sequoidal powers $A^{\sequoid n}$.  But now the limit of these objects is not quite the game $\oc A$; instead, it is the game $A^{\sequoid\omega}=\co A$ in which player $O$ may open an arbitrarily large number of copies of $A$, but not infinitely many.  In the finite case, there was no way to keep track of infinite positions, so we could not make this distinction, but in the win-games case we can: we set $\zeta_{\co A}(s)=\zeta_{\oc A}(s)$, unless $s$ contains moves in infinitely many games, in which case we set $\zeta_{\co A}(s) = P$.  

This limit is not preserved by the functor $A\sequoid\blank$: in the game $A^{\sequoid(\omega+1)}=A\sequoid\co A$, player $O$ wins if he wins either in $A$ or in $\co A$, so he can win even if he plays in infinitely many games, as long as he wins in the first copy of $A$.  Similarly, in the game $A^{\sequoid(\omega+n)}$, player $O$ can win as long as he wins in one of the first $n$ copies of $A$.  Therefore, the limit $A^{\sequoid\omega2} \emph{is}$ the game $\oc A$: the final sequence for $A\sequoid\blank$ stabilizes at $\omega2$.  

We see that the exponential in $\W$ is not an MTT-exponential.  

This example is a special case of our later result on transfinite games.  For now, we examine a coalgebraic approach that will prove that the final coalgebra $\oc A$ for $A\sequoid \blank$ in the category $\W$ of win-games gives us a cofree commutative comonoid.  

\subsection{The coalgebraic construction under the strong monoidal hypothesis}

We will now need to assume that we are in a decomposable, distributive sequoidal category $(\C,\C_s,J,\wk)$ such that $\C_s$ has all products and $J$ preserves them.  However, we will no longer need the MTT assumption that the exponential should be constructed as a limit of sequoidal powers.  The main cost is that we will need to make a further assumption: that a certain naturally defined morphism $\oc A \tensor \oc B\to \oc (A\times B)$ is an isomorphism.  This assumption, broadly corresponding to the demand that the functor $\oc A$ be strong monoidal from the Cartesian category $(\C,\times,1)$ to the monoidal category $(\C,\tensor,I)$, will allow us to construct the comultiplication directly from the Cartesian structure and the definition of $\oc A$ as a final coalgebra.  

\begin{notation}
  We shall sometimes make the monoidal structure of the Cartesian product explicit by writing $\sigma\times\tau$ for $\langle\comp\sigma{\pr_1},\comp\tau{\pr_2}\rangle$.
\end{notation}

\begin{definition}
  Let $A,B$ be objects of an decomposable, distributive sequoidal category $(\C,\C_s,J,\wk)$ with final coalgebras $\oc A\xrightarrow{\alpha_A} A\sequoid\oc A$ for all endofunctors of the form $A\sequoid\blank$.  Let $A,B$ be objects of $C$.  Then we have a composite $\kappa_{A,B}\from\oc A \tensor\oc B\to(A\times B)\sequoid(\oc A\tensor \oc B)$:
  \settowidth{\arrow}{\scriptsize$\id_{A\sequoid(\oc A\tensor\oc B)}\times (\id_B\sequoid\sym_{\oc B,\oc A})$}
  \begin{IEEEeqnarray*}{RCL}
    \kappa_{A,B} = \oc A \tensor \oc B & \constantwidthxrightarrow{\langle\wk_{\oc A,\oc B},\;\comp{\sym_{\oc A,\oc B}}{\wk_{\oc A,\oc B}}} & (\oc A \sequoid \oc B) \times (\oc B \sequoid \oc A) \\
    \cdots & \constantwidthxrightarrow{(\alpha_A\sequoid\id_{\oc B}) \times (\alpha_B\sequoid\id_{\oc A})} & ((A \sequoid \oc A) \sequoid \oc B) \times ((B \sequoid \oc B) \sequoid \oc A) \\
    \cdots & \constantwidthxrightarrow{\passoc_{A,\oc A,\oc B}\inv\times\passoc_{B,\oc B,\oc A}\inv} & (A \sequoid (\oc A \tensor \oc B)) \times (B \sequoid (\oc B \tensor \oc A) \\
      \cdots & \constantwidthxrightarrow{\id_{A\sequoid(\oc A\tensor\oc B)}\times (\id_B\sequoid\sym_{\oc B,\oc A})} & (A \sequoid (\oc A \tensor \oc B)) \times (B \sequoid (\oc A \tensor \oc B))
  \end{IEEEeqnarray*}
inducing a morphism
\[
  \oc A\tensor \oc B \xrightarrow{\kappa_{A,B}} (A \sequoid(\oc A\tensor\oc B)) \times (B \sequoid(\oc A\tensor \oc B)) \xrightarrow{\dist\inv}
    (A\times B)\sequoid(\oc A\tensor\oc B)
    \]
  Remembering that our category has a final coalgebra $\oc(A\times B)$ for the functor $(A\times B)\sequoid\blank$, we write $\int_{A,B}$ for the unique morphism $\oc A\tensor\oc B\to \oc(A\times B)$ making the following diagram commute
  \begin{equation}\label{definitionOfInt}
    \begin{tikzcd}
      \oc A \tensor \oc B \arrow[r, "\kappa_{A,B}"] \arrow[d, "\int_{A,B}"']
        & (A\sequoid(\oc A \tensor \oc B) \times (B \sequoid (\oc A \tensor \oc B)) \arrow[r, "\dist\inv"]
          & (A \times B) \sequoid (\oc A \tensor \oc B) \arrow[d, "\id_{A\times B}\sequoid\int_{A,B}"] \\
      \oc(A\times B) \arrow[rr, "\alpha_{A\times B}"']
        &
          & (A \times B) \sequoid \oc(A\times B)
    \end{tikzcd}\tag{$\star$}
  \end{equation}
\end{definition}

\begin{proposition}
  In the category of games, the morphism $\int_{A,B}$ is an isomorphism for all negative games $A,B$.
\end{proposition}
\begin{proof}
  Observe that the morphism $\int_{A,B}$ is the copycat strategy on $\oc A\tensor\oc B\implies \oc (A\times B)$ that starts a copy of $A$ on the left whenever a copy of $A$ is started on the right and starts a copy of $B$ on the left whenever a copy of $B$ is started on the right (indeed, the morphisms in the diagram above are all copycat morphisms, so the copycat strategy we have just described must make that diagram commute.  Since there are infinitely many copies of both $A$ and $B$ available in $\oc (A\times B)$, and since a new copy of $A$ or $B$ may be started at any time, we may define an inverse copycat strategy on $\oc(A\times B)\implies \oc A\tensor\oc B$.
\end{proof}

Our first main result for this section will be the following:
\begin{theorem}
  \label{StrongMonoidalFunctor}
  Let $(\C,\C_s,J,\wk)$ be a distributive and decomposable sequoidal category with a final coalgebra $\oc A\xrightarrow{\alpha_A}A\sequoid\oc A$ for each endofunctor of the form $A\sequoid\blank$.  Suppose further that the morphism $\int_{A,B}$ as defined above is an isomorphism for all objects $A,B$.  $A\mapsto\oc A$ gives rise to a strong symmetric monoidal functor from the monoidal category $(\C, \times, 1)$ to the monoidal category $(\C, \tensor, I)$.  
\end{theorem}

We start off by defining a morphism $\mu\from\oc A\to\oc A\tensor\oc A$.  This will turn out to be the comultiplication for the cofree commutative comonoid over $A$.  First, we note that we have the following composite:
\[
  \oc A \xrightarrow{\alpha_A} A \sequoid \oc A \xrightarrow{\Delta} (A\sequoid\oc A)\times (A\sequoid\oc A)\xrightarrow{\dist\inv} (A\times A)\sequoid\oc A
  \]
where $\Delta$ is the diagonal map on the product.  There is therefore a unique morphism $\sigma_A=\fcoal{\comp{\dist\inv}{\comp{\Delta}{\alpha_A}}}$ making the following diagram commute:
\begin{equation}\label{definitionOfSigma}
  \begin{tikzcd}
    \oc A \arrow[r, "\alpha_A"] \arrow[d, "\sigma_A"']
      & A \sequoid \oc A \arrow[r, "\Delta"]
        & (A \sequoid \oc A)\times(A \sequoid \oc A) \arrow[r, "\dist\inv"]
          & (A \times A) \sequoid \oc A \arrow[d, "\id_{A\times A}\sequoid\sigma_A"] \\
    \oc(A\times A) \arrow[rrr, "\alpha_{A\times A}"]
      &
        &
          & (A \times A) \sequoid \oc(A \times A)
  \end{tikzcd}\tag{\dag}
\end{equation}
and we may set $\mu_A=\comp{\int_{A,A}\inv}{\sigma_A}$.

We also define a morphism $\der_A\from \oc A \to A$.  Note that since $I$ is isomorphic to $1$, we have a unique morphism $*_A\from A\to I$ for each $A$.  We define $\der_A$ to be the composite
\[
  \begin{tikzcd}
    \oc A \arrow[r, "\alpha_A"]
      & A \sequoid \oc A \arrow[r, "\id_A \sequoid *_{\oc A}" yshift=0.3em]
        & A \sequoid I \arrow[r, "\run_A"]
          & A
  \end{tikzcd}
  \]

We define the action of $\oc$ on morphisms as follows: suppose that $\sigma\from A \to B$ is a morphism in $\C$.  Then we have a composite
\[
  \begin{tikzcd}
    \oc A \arrow[r, "\mu"]
      & \oc A \tensor \oc A \arrow[r, "\der_A\tensor\id_{\oc A}"]
        & A \tensor \oc A \arrow[r, "\sigma\tensor\id_{\oc A}"]
          & B \tensor \oc A \arrow[r, "\wk_{B,\oc A}"]
            & B \sequoid \oc A
  \end{tikzcd}
  \]
There is therefore a unique morphism $\oc\sigma\from\oc A \to\oc B$ making the following diagram commute:
\[
  \begin{tikzcd}
    \oc A \arrow[r, "\mu"] \arrow[d, "\oc\sigma"']
      & \oc A \tensor \oc A \arrow[r, "\der_A\tensor\id_{\oc A}"]
        & A \tensor \oc A \arrow[r, "\sigma\tensor\id_{\oc A}"]
          & B \tensor \oc A \arrow[r, "\wk_{B,\oc A}"]
            & B \sequoid \oc A \arrow[d, "\id_B\sequoid\oc\sigma"] \\
    \oc B \arrow[rrrr, "\alpha_B"]
      &
        &
          &
            & B \sequoid \oc B
  \end{tikzcd}
  \]

\begin{proposition}\label{StrongMonoidalFunctorActual}
  $\sigma\mapsto\oc\sigma$ respects composition, so $\oc$ is a functor.  Moreover, $\oc$ is a strong symmetric monoidal functor from the Cartesian category $(\C, \times, 1)$ to the symmetric monoidal category $(\C, \tensor, I)$, witnessed by $\int$ and $\dec^0$.
\end{proposition}

This completes the proof of Theorem \ref{StrongMonoidalFunctor}.

Since $\oc$ is a strong monoidal functor, it induces a functor $\CCom(\oc)$ from the category $\CCom(\C,\times,1)$ of comonoids over $(\C, \times, 1)$ to the category $\CCom(\C,\tensor,I)$ of comonoids over $(\C, \tensor, I)$ making the following diagram commute:
\[
  \begin{tikzcd}
    \CCom(\C,\times,1) \arrow[r, "\F"] \arrow[d, "\CCom(\oc)"']
      & (\C, \times, 1) \arrow[d, "\oc"] \\
    \CCom(\C, \tensor, I) \arrow[r, "\F"]
      & (\C, \tensor, I)
  \end{tikzcd}
  \]
where $\F$ is the forgetful functor.

Let $A$ be an object of $\C$.  Since $(\C, \times, 1)$ is Cartesian, the diagonal map $\Delta\from A\to A\times A$ is the cofree commutative comonoid over $A$ in $(\C,\times,1)$.  

\begin{proposition}\label{itsMu}
  $\CCom(\oc)\left(A\xrightarrow{\Delta}A\times A\right)$ has comultiplication given by $\mu_A\from\oc A \to \oc A\tensor\oc A$ and counit given by the unique morphism $\eta_A\from \oc A \to I$.
\end{proposition}

In particular, this proves that the comultiplication $\mu_A$ is associative and that the counit $\eta_A$ is a valid counit for $\mu_A$.

We can now state our second main result from this section.

\begin{theorem}
  \label{Coalgebra__CoCoCo}
  Let $(\C,\C_s,J,\wk)$ be a sequoidal category satisfying all the conditions from Theorem \ref{StrongMonoidalFunctor}.  Let $A$ be an object of $\C$ (equivalently, of $\C_s$).  Then $\oc A$, together with the comultiplication $\mu_A$ and counit $\eta_A$, is the cofree commutative comonoid over $A$.
\end{theorem}

We give a broad outline of the proofs of the results in this section in the Appendix.

\subsection{The Sequoidal Exponential as a Bifree Algebra}
Observe that in our category of games, $(!A,\alpha)$ is in fact a \emph{bifree algebra} for $A\sequoid\blank$ --- the isomorphism $\alpha^{-1}: A \sequoid !A \rightarrow !A$ is an initial algebra for  $A \sequoid \blank$.  We may show that in such cases, the condition that $!$ is strong monoidal --- and thus the cofree exponential ---  always holds\footnote{Without requiring our sequoidally decomposable category to have finite products  we may equip each object $\oc A$ with the structure of a comonoid by defining:   
$\mu:!A \rightarrow !A  \otimes !A$
 to be the catamorphism of the $A \sequoid \blank$ algebra:
$$A \sequoid (!A \otimes !A) %\stackrel{\langle \id, A \sequoid \sym\rangle}{\cong} 
\cong A \sequoid (!A \otimes !A) \times  A \sequoid (!A \otimes !A) \cong (A \sequoid !A) \sequoid !A \times  (A \sequoid !A) \sequoid !A \cong (!A \sequoid !A) \cong (!A \sequoid !A) \cong (!A \otimes !A)$$     
This satisfies the further requirements of a \emph{linear category} in the sense of \cite{Bierman}, although it does not appear to be possible to show that it is the cofree commutative comonoid.} :
we may define an inverse to $\int:!A \otimes !A \rightarrow ! (A \times B)$  as the \emph{catamorphism} of the  $A \sequoid\blank$-algebra:
$$(A \times B) \sequoid !A \otimes !B \cong (A \sequoid (!A \otimes !B)) \times  (B \sequoid (!A \otimes !B)) \cong (!A \sequoid !B) \times (!B \sequoid !A)$$   

It is not necessary for the final $A \sequoid\_$-coalgebra to be bifree for the exponential to be strong monoidal and thus the cofree commutative comonoid. An example is provided by  the category $\W$ of win-games and winning strategies, which is sequoidal closed and decomposable. To show that the  final $A \sequoid\_$-coalgebra in this category is not bifree, it suffices to observe that from such an algebra, we may derive a  \emph{fixed point} operator $\fix_A:\C(A,A) \rightarrow \C(I,A)$ for each $A$, such that $\fix_A(f);f = \fix(f)$.      
\begin{proposition}Suppose $\C$ is sequoidal closed and decomposable, and $(!A,\alpha)$ is a bifree $A \sequoid\_$-algebra. Then we may define a fixed point operator on $\C$.  
\end{proposition}    
\begin{proof}For any $A$, let  $\Phi_A:!(A \multimap A) \rightarrow A$ be the catamorphism of the counit to the adjunction $A \sequoid\blank \dashv A \multimap$,  $\epsilon_{A,A}: (A \multimap A) \sequoid A \rightarrow A$, which is a  $(A \multimap A) \sequoid \blank$-algebra. For any morphism $f:A \rightarrow A$ we may define $\fix_A(f) = \Lambda(f)^\dag;\Phi_A$, where $\Lambda(f):I \rightarrow (A \multimap A)$ is the ``name'' of $f$.    
\end{proof}
As one would expect, it is not possible to define a fixed point operator on the category of games and winning strategies ---  for example, if $\bot$ is the game with a single move then the hom-set $\C(I,\bot)$ is empty and hence there can be no morphism $\fix_\bot(\id_\bot)$. So the final  $A \sequoid \_$-coalgebra is not bifree in this case. 

\section{Transfinite Games}

Of the conditions that we used to construct the cofree commutative comonoid in sequoidal categories, the requirement that $\int_{A,B}$ be an isomorphism stands out as the least satisfactory.  All the other conditions are `finitary', and relate directly to the connectives we have introduced, whereas the morphism $\int_{A,B}$ can only be constructed using the final coalgebra property for the exponential connective $\oc$.  For this reason, we might wonder whether we can do without the condition that $\int_{A,B}$ be an isomorphism.  In this section, we shall give a negative answer to that question: we shall construct a distributive and decomposable sequoidal closed category with final coalgebras $\oc A$ for all functors of the form $A\sequoid\blank$, and shall show that $\oc A$ does not have a natural comonoid structure.  In doing this, we hope to shed some light upon alternative algebraic or coalgebraic constructions for the cofree commutative comonoid that work in a purely `finitary' manner.

Our sequoidal category will be closely modelled upon the category of games we have just considered: the objects will be games, with the modification that sequences of moves may now have transfinite length.  This is a natural construction, occurring in the study of determinacy by Mycielski \cite{mycielskiChoice}, Blass \cite{blassChoice} and Weiss \cite{longgamesbook}, and it appears to be present in the semantic context in the work of Roscoe \cite{RoscoeCspInfinite}, Levy \cite{LevyGsInfinite} and Laird \cite{LairdOrdinalGames}.  

The general idea is as follows: we will show that the definition of the final coalgebra for the sequoid functor in a category of transfinite games is largely unchanged from the definition in the category of games with finite-length plays: $\oc A$ is the game formed from a countably infinite number of copies of $A$, indexed by $\omega$, with the proviso that player $O$ must open them in order.  We observe that the copycat strategy $\int_{A,B}\from\oc A\tensor\oc B\to \oc(A\times B)$ is not an isomorphism, and that we cannot construct the comultiplication $\oc A \to \oc A \tensor \oc A$ in a sensible way.  Moreover, we cannot construct the comonad $\oc A \to \oc \oc A$, so $\oc$ does not give us a model of linear logic in even the most general sense.  In all three cases, the reason why the construction fails is that we might run out of copies of the game $A$ (or $B$) on the left hand side before we have run out of copies on the right hand side.  In the finite-plays setting, it is impossible to run out of copies of a subgame, because there are infinitely many copies, so it is impossible to play in all of them in a finite-length play.  In the transfinite setting, however, we cannot guarantee this: consider, for example, a position in $\oc A_0 \implies \oc A_1 \tensor \oc A_2$ (with indices given so we can refer to the different copies of $A$) in which player $O$ has opened all the copies of $A$ in $\oc A_1$.  Since player $P$ is playing by copycat, she must have opened all of the copies of $A$ in $\oc A_0$.  If, at time $\omega+1$, player $O$ now plays in $\oc A_2$, player $P$ will have no reply to him.

The `correct' definition of $\oc A$ in the transfinite game category is one in which there is an unlimited number of copies of $A$ to open (rather than $\omega$-many), but this is not the final coalgebra for the functor $A\sequoid\blank$.  

\subsection{Transfinite Games}

We give a brief summary of the construction of the category of transfinite games.  Some more details may be found in Appendix \ref{TransfiniteGamesConstructionInFull}.

We shall fix an additively indecomposable ordinal $\alpha = \omega^\beta$ throughout, which will be a bound on the ordinal length of positions in our game.  So, for example, the original category of games is the case $\alpha=\omega$.  If $X$ is a set, we write $X^{*<\alpha}$ for the set of transfinite sequences of elements of $X$ of length less than $\alpha$.

\begin{definition}
  A \emph{game} or a \emph{game over $\alpha$} or an \emph{$\alpha$-game} is a tuple $A=(M_A,\lambda_A,\zeta_A,P_A)$, where:
  \begin{itemize}
    \item $M_A$ is a set of moves
    \item $\lambda_A\from M_A\to\OP$ designates each move as an \emph{$O$-move} or a \emph{$P$-move}
    \item $P_A\subset M_A^{*<\alpha}$ is a non-empty prefix-closed set of transfinite sequences of moves from $M_A$, called \emph{positions}.  We say that $s$ is a \emph{successor position} if the length of $s$ is a successor ordinal and we say that $s$ is a \emph{limiting} position if the length of $s$ is a limit ordinal.
    \item $\zeta_A\from P_A\to\OP$ designates each position as an \emph{$O$-position} or a \emph{$P$-position}.
  \end{itemize}
  such that:
  \begin{description}
    \item[Consistency] If $sa\in P_A$ is a successor position, then $\zeta_A(sa) = \lambda_A(a)$
    \item[Alternation] If $s,sa\in P_A$, then $\zeta_A(s) = \neg\zeta_A(sa)$
    \item[Limit closure] If $s\in M_A^{*<\alpha}$ is a limiting position such that $t\in P_A$ for all proper prefixes $t\pprefix s$, then $s\in P_A$.
  \end{description}

  We say that a game $A$ is \emph{positive} if $\zeta_A(\emptyplay)=O$ and \emph{negative} if $\zeta_A(\emptyplay) = P$.  We say that $A$ is \emph{completely negative} if $\zeta_A(s)=P$ for all limiting plays $s$.  
\end{definition}

Apart from the possibly transfinite length of sequences of moves, the only new thing in this definition is the function $\zeta_A$, which we met briefly when defining win-games.  Thanks to the consistency condition, $\zeta_A$ gives us no new information for successor positions; it is necessary in order to tell us which player is to move at limiting positions.

\begin{definition}
  A \emph{strategy} for an $\alpha$-game $A$ is a non-empty prefix-closed subset $\sigma\subset P_A$ satisfying the following conditions:
  \begin{description}
    \item[Closure under $O$-replies] If $s\in\sigma$ is a $P$-position and $sa\in P_A$, then $sa\in\sigma$.
    \item[Determinism] If $sa,sb\in\sigma$ are $P$-positions, then $a=b$.
  \end{description}
\end{definition}

Given games $A$ and $B$, we may form their product $A\times B$, tensor product $A\tensor B$, linear implication $A\implies B$ and sequoid $A\sequoid B$ in roughly the same way that we construct these connectives for finite-length games.  The only point we need to take care of is the behaviour of the $\zeta$-functions at limit ordinals.  We do this according to the following formulae:
\begin{gather*}
  \zeta_{A\times B}(s) = \zeta_A(s) \wedge \zeta_B(s) \\
  \zeta_{A\tensor B}(s) = \zeta_A(s) \wedge \zeta_B(s) \\
  \zeta_{A\implies B}(s) = \zeta_A(s) \Rightarrow \zeta_B(s) \\
  \zeta_{A\sequoid B}(s) = \zeta_A(s) \wedge \zeta_B(s)
\end{gather*}
Here, $\wedge$ and $\Rightarrow$ are the usual propositional connectives on $\{T,F\}$, but with $T$ replaced by $P$ and $F$ replaced by $O$.

Once we have defined our connectives, we may define a \emph{morphism} from $A$ to $B$ to be a strategy for $A\implies B$ and we may define composition of morphisms in the usual way: given games $A$, $B$ and $C$, and strategies $\sigma$ for $A\implies B$ and $\tau$ for $B\implies C$, we define
\[
  \sigma\|\tau = \{\s\in (M_A \cprd M_B \cprd M_C)^{*<\alpha}\suchthat \s\vert_{A,B}\in\sigma,\;\s\vert_{B,C}\in\tau\}
  \]
and then we define
\[
  \comp\tau\sigma = \{\s\vert_{A,C}\suchthat\s\in\sigma\|\tau\}
  \]
\begin{remark}
  Since $\alpha$ is additively decomposable, the interleaving of two sequences of length less than $\alpha$ must itself have length less than $\alpha$.  This is important: if we allow $\alpha$ to be an additively decomposable ordinal, then it is possible to construct two strategies whose composite is not closed under $O$-replies because a particular reply in the interleaving of two sequences occurs at time later than $\alpha$ and so is not included.
\end{remark}

We can show that this composition is associative and moreover that we obtain a distributive and decomposable sequoidal category.  We call this category $\G(\alpha)$ and call the corresponding strict subcategory $\G_s(\alpha)$.  The hardest part of this is showing that the category is monoidal closed, because the linear implication of completely negative games is not necessarily completely negative.  

\subsection{The final sequence for the sequoidal exponential}

We now want to show that $\G(\alpha)$ has final coalgebras for the functor $A\sequoid\blank$, given by the transfinite game $\oc A$, which is defined as follows:
\begin{itemize}
  \item $M_{\oc A} = M_A \times \omega$
  \item $\lambda_{\oc A} = \lambda_A \circ \pr_1$
\end{itemize}
We define $\oc P_A$ to be the set of all sequences $s\in M_{\oc A}^{*<\alpha}$ such that $s\vert_n\in P_A$ for all $n$.  Then we define $\zeta_{\oc A}\from\oc P_A\to\OP$ by
\[
  \zeta_{\oc A}(s) = \bigwedge_{n\in\omega}\zeta_A(s\vert_n)
  \]
In other words, $\zeta_{\oc A}(s)=P$ if and only if $\zeta_A(s\vert_n)=P$ for all $n$.

There is a natural copycat strategy $\alpha_A\from \oc A \to A \sequoid \oc A$, just as in the finite plays case.  We want to show that this is the final coalgebra for $A\sequoid\blank$.  The proof for the finite case found in \cite{martinsthesis} will not work in this case, since it implicitly uses the fact that $\oc A$ is an MTT-exponential.  In the transfinite categories, this is no longer the case.  

While it is possible to prove that $\alpha_A\from \oc A\to A\sequoid \oc A$ is the final coalgebra for $A\sequoid\blank$ directly, we shall instead give a proof by extending the MTT sequence to the full final sequence.  We shall give a complete classification of the games $A^{\sequoid\gamma}$ and use it to show that the final sequence for $A\sequoid\blank$ must stabilize at $\oc A$.  

\begin{definition}
  Let $s\in\omega^{*<\alpha}$ be any transfinite sequence of natural numbers.  We define the \emph{derivative} $\Delta s$ of $s$ to be the sequence given by removing all instances of $0$ from $s$ and subtracting $1$ from all other terms.  In other words, if $s\from\gamma\to\omega$, for $\gamma<\alpha$, then we have:
  \[
    \Delta s = s\inv(\omega\setminus\{0\})\xrightarrow{s}\omega\setminus\{0\}\xrightarrow{-1}\omega
    \]
  (where $s\inv(\omega\setminus\{0\})$ carries the induced order).  We now define predicates $\blank\le\gamma$ on sequences $s\in \omega^{*<\alpha}$ as follows:
  \begin{itemize}
    \item $\emptyplay\le 0$
    \item If $\Delta s\le\gamma$, then $s\le\gamma+1$
    \item If $\mu$ is a limit ordinal and $s\in\omega^{*<\alpha}$ is such that for all successor-length prefixes $t\prefix s$ we have $t\le\gamma$ for some $\gamma<\mu$, then $s\le\mu$.  In other words, $\{s\in \omega^{*<\alpha}\suchthat s\le\mu\}$ is the limit-closure of the union of the sets $\{s\in\omega^{*<\alpha}\suchthat s\le\gamma\}$ for $\gamma<\mu$.
  \end{itemize}
\end{definition}

It is easy to prove some basic results about these predicates:
\begin{proposition}\label{basicResultsAboutRank}
  i) If $s\le\gamma$ and $t$ is any subsequence of $s$ (not necessarily an initial prefix), then $t\le\gamma$.
  
  ii) If $s\le\gamma$, then $\Delta s\le\gamma$

  iii) If $s\le\gamma$ and $\gamma\le\delta$, then $s\le\delta$

  iv) If $s\in\omega^{*<\alpha}$ has length $\mu$, where $\mu$ is a limit ordinal, then $s\le\mu$.  If $s$ has length $\mu+n$ for some $n\in\omega$, then $s\le\mu+\omega$.  In particular, $s\le\alpha$ for all $s\in \omega^{*<\alpha}$.  
\end{proposition}

We can then classify the terms of the final sequence for $A\sequoid\blank$ as follows:
\begin{theorem}\label{finalseqClassification}
  Let $A$ be any game.  Then $A^{\sequoid\gamma}\cong(M_{\oc A}, \lambda_{\oc A}, \zeta_{\oc A}, P_{\oc A,\gamma})$, where
  \[
    P_{\oc A,\gamma} = \{s\in P_{\oc A}\suchthat \pr_2\circ s\le\gamma\}
    \]
  The morphism $j_\gamma^\delta$ is the copycat strategy.
\end{theorem}

\begin{corollary}
  The final sequence for $A\sequoid\blank$ stabilizes at $\alpha$ and we have $A^{\sequoid\alpha}=\oc A$.
\end{corollary}
\begin{proof}
  By Proposition \ref{basicResultsAboutRank}(iv), $\pr_2\circ s\le\alpha$ for all $s\in P_{\oc A}$ and so $\pr_2\circ s\le(\alpha+1)$, by Proposition \ref{basicResultsAboutRank}(iii).  It follows, by Theorem \ref{finalseqClassification}, that $A^{\sequoid\alpha}=\oc A$ and that the morphism $A^{\sequoid\alpha}\to A^{\sequoid(\alpha+1)}$ is the morphism $\alpha_A$.
\end{proof}

\appendix

\section{Proofs}

\subsection{Proof of Proposition \ref{StrongMonoidalFunctorActual}}

\begingroup
\def\thetheorem{\ref{StrongMonoidalFunctorActual}}
\begin{proposition}
  $\sigma\mapsto\oc\sigma$ respects composition, so $\oc$ is a functor.  Moreover, $\oc$ is a strong symmetric monoidal functor from the Cartesian category $(\C, \times, 1)$ to the symmetric monoidal category $(\C, \tensor, I)$, witnessed by $\int$ and $\dec^0$.
\end{proposition}
\addtocounter{theorem}{-1}
\endgroup

In order to show that $\sigma\mapsto\oc\sigma$ respects composition, we need the following lemma:

\begin{lemma}\label{aFormulaForAlpha}
  Let $A$ be an object of $\C$.  Then $\alpha_A\from\oc A\to A\sequoid\oc A$ is equal to the following composite:
  \[
    \begin{tikzcd}
      \oc A \arrow[r, "\mu_A"]
        & \oc A \tensor \oc A \arrow[r, "\der_A\tensor\id_{\oc A}"]
          & A \tensor \oc A \arrow[r, "\wk_{A,\oc A}"]
            & A \sequoid \oc A
    \end{tikzcd}
    \]
\end{lemma}

\begin{proof}
  We may paste together diagrams \eqref{definitionOfInt} and \eqref{definitionOfSigma} to form the following diagram (where we shall omit subscripts where there is no ambiguity):
  \begin{equation*}
    \begin{tikzcd}[cramped]
      \oc A \arrow[r, "\alpha"] \arrow[d, "\sigma_A"']
        & A \sequoid \oc A \arrow[r, "\Delta"]
          &[-24pt] (A \sequoid \oc A) \times (A \sequoid \oc A) \arrow[r, "\dist\inv"]
            & (A \times A) \sequoid \oc A \arrow[d, "\id_{A\times A}\sequoid\sigma_A"] \\
      \oc(A\times A) \arrow[rrr, "\alpha"]
        &
          &
            & (A \times A) \sequoid \oc(A\times A) \\
      \oc A \tensor \oc A \arrow[rr, "\kappa_{A,A}"] \arrow[u, "\int_A"]
        &
          & (A \sequoid (\oc A \tensor \oc A)) \times (A \sequoid (\oc A \tensor \oc A)) \arrow[r, "\dist\inv"]
            & (A\times A)\sequoid(\oc A \tensor \oc A) \arrow[u, "\id_{A\times A}\sequoid\int_A"']
    \end{tikzcd}
  \end{equation*}
  where we observe that the composites down the left and right hand sides (after inverting the lower arrows) are $\mu_A$ and $\id_{A\times A}\sequoid\mu_A$.

  Now note that we have the following commutative square:
  \[
    \begin{tikzcd}
      (A \times A) \sequoid \oc A \arrow[r, "\dist"] \arrow[d, "\id_{A\times A}\sequoid\mu_A"']
        & (A \sequoid \oc A) \times (A \sequoid \oc A) \arrow[d, "(\id\sequoid\mu)\times(\id\sequoid\mu)"] \\
      (A \times A) \sequoid (\oc A \tensor \oc A) \arrow[r, "\dist"']
        & (A \sequoid (\oc A \tensor \oc A)) \times (A \sequoid (\oc A \tensor \oc A)
    \end{tikzcd}
    \]

  (using the definition of $\dist$).  Putting this together with the diagram above, we get the following commutative diagram:
  \[
    \begin{tikzcd}
      \oc A \arrow[r, "\alpha"] \arrow[d, "\mu_A"']
        & A \sequoid \oc A \arrow[r, "\Delta"]
          & (A \sequoid \oc A) \times (A \sequoid \oc A) \arrow[d, "\id\sequoid\mu_A\times\id\sequoid\mu_A"] \\
      \oc A \tensor \oc A \arrow[rr, "\kappa_{A,A}"]
        & \cdots \arrow[r]
          & (A \sequoid (\oc A \tensor \oc A)) \times (A \sequoid (\oc A \tensor \oc A))
    \end{tikzcd}
    \]
  We now expand the definition of $\kappa_{A,A}$  and take the projections on to the first and second components, yielding the following two commutative diagrams:
  \[
    \begin{tikzcd}\label{firstProjectionDiagram}
      \oc A \arrow[rrr, "\alpha"] \arrow[d, "\mu_A"']
        &
          &
            & A \sequoid \oc A \arrow[d, "\id\sequoid\mu_A"] \\
      \oc A \tensor \oc A \arrow[r, "\alpha\tensor\id"]
        & (A \sequoid \oc A) \tensor \oc A \arrow[r, "\wk"]
          & (A \sequoid \oc A) \sequoid \oc A \arrow[r, "\passoc\inv"]
            & A \sequoid (\oc A \tensor \oc A)
    \end{tikzcd}\tag{\textbf{1}}
    \]

  \begin{equation*}\label{secondProjectionDiagram}
    \begin{tikzcd}[cramped]
     \oc A \arrow[rrrr, "\alpha"] \arrow[d, "\mu_A"']
        &
          &
            &
              & A \sequoid \oc A \arrow[d, "\id\sequoid\mu_A"] \\
      \oc A \tensor \oc A \arrow[r, "\sym"']
        & \oc A \tensor \oc A \arrow[r, "\alpha\tensor\id" yshift=0.4em]
          & (A \sequoid \oc A) \tensor \oc A \arrow[r, "\comp{\passoc\inv}{\wk}" yshift=0.4em]
            & A \sequoid (\oc A \tensor \oc A) \arrow[r, "\id\sequoid\sym"']
              & A \sequoid (\oc A \tensor \oc A)
    \end{tikzcd}\tag{\textbf{2}}
  \end{equation*}

  From diagram \eqref{firstProjectionDiagram}, we construct the following commutative diagram:
  \[
    \begin{tikzcd}
      \oc A \arrow[rrr, "\alpha"] \arrow[d, rightsquigarrow, "\mu_A"'] \arrow[phantom, drrr, "\textbf{a}" xshift=0.9em]
        &
          &
            & A \sequoid \oc A \arrow[d, "\id\sequoid\mu_A"] \\
      \oc A \tensor \oc A \arrow[r, "\alpha\tensor\id"] \arrow[ddr, rightsquigarrow, "\der_A\tensor\id"'] \arrow[phantom, dr, "\textbf{b}" xshift=0.6em]
        & (A \sequoid \oc A) \tensor \oc A \arrow[r, "\wk"] \arrow[d, "(\id\sequoid*)\tensor\id"] \arrow[phantom, dr, "\textbf{c}" xshift=0.3em]
          & (A \sequoid \oc A) \sequoid \oc A \arrow[r, "\passoc\inv"] \arrow[d, "(\id\sequoid*)\sequoid\id"] \arrow[phantom, dr, "\textbf{e}" xshift=0.3em]
            & A \sequoid (\oc A \sequoid \oc A) \arrow[d, "\id\sequoid(*\tensor\id)"] \\
      %
        & (A \sequoid I) \tensor \oc A \arrow[r, "\wk"] \arrow[d, "\run\tensor\id"] \arrow[phantom, dr, "\textbf{d}" xshift=0.3em]
          & (A \sequoid I) \sequoid \oc A \arrow[r, "\passoc\inv"], \arrow[d, "\run\tensor\id"] \arrow[phantom, r, "\textbf{f}" xshift=-0.6em, yshift=-1.0em]
            & A \sequoid (I \tensor \oc A) \arrow[dl, "\id\sequoid\lunit"] \\
      %
        & A \tensor \oc A \arrow[r, rightsquigarrow, "\wk"]
          & A \sequoid \oc A
            &
    \end{tikzcd}
    \]

  \textbf{a} is diagram \eqref{firstProjectionDiagram}.

  \textbf{b} commutes by the definition of $\der_A$.

  \textbf{c} and \textbf{d} commute because $\wk$ is a natural transformation.

  \textbf{e} commutes because $\passoc$ is a natural transformation.

  \textbf{f} commutes by one of the coherence conditions in the definition of a sequoidal category.

  We now observe that the composite of the three squiggly arrows is the composite we are trying to show is equal to $\alpha$; we have $\alpha$ along the top, so it will suffice to show that the composite
  \[
    \begin{tikzcd}
      \xi_A\;=\;\oc A \arrow[r, "\mu_A"]
        & \oc A \tensor \oc A \arrow[r, "*\tensor\id"]
          & I \tensor \oc A \arrow[r, "\lunit"]
            & \oc A
    \end{tikzcd}
    \]
  is equal to the identity.  We do this using diagram \eqref{secondProjectionDiagram}.  First we construct the diagram shown in Figure \ref{hugeDiagram1}.

  \begin{SidewaysFigure}
    \[
      \begin{tikzcd}[ampersand replacement=\&]
        \oc A \arrow[rrrrr, "\alpha"] \arrow[d, "\mu_A"'] \arrow[phantom, drrrrr, "\textbf{a}"]
          \&
            \&
              \&
                \& 
                  \& A \sequoid \oc A \arrow[d, "\id\sequoid\mu_A"] \\
        \oc A \tensor \oc A  \arrow[r, "\sym"] \arrow[d, "*\tensor\id"'] \arrow[phantom, dr, "\textbf{b}"]
          \& \oc A \tensor \oc A \arrow[r, "\alpha\tensor\id"] \arrow[d, "\id\tensor*"]
            \& (A \sequoid \oc A) \tensor \oc A \arrow[r, "\wk"] \arrow[d, "\id\sequoid*"] \arrow[phantom, dr, "\textbf{d}"]
              \& (A \sequoid \oc A) \sequoid \oc A \arrow[r, "\passoc\inv"] \arrow[d, "\id\sequoid*"] \arrow[phantom, dr, "\textbf{e}"]
                \& A \sequoid (\oc A \tensor \oc A) \arrow[r, "\id\sequoid\sym"] \arrow[d, "\id\sequoid(\id\sequoid*)"] \arrow[phantom, dr, "\textbf{c}"]
                  \& A \sequoid (\oc A \tensor \oc A) \arrow[d, "\id\sequoid (*\sequoid\id)"] \\
        I \tensor \oc A \arrow[r, "\sym"] \arrow[d, "\lunit"'] \arrow[phantom, dr, "\textbf{g}"]
          \& \oc A \tensor I \arrow[r, "\alpha\tensor\id"] \arrow[d, "\runit"] \arrow[phantom, dr, "\textbf{f}"]
            \& (A \sequoid \oc A) \tensor I \arrow[r, "\wk"] \arrow[d, "\runit"] \arrow[phantom, dr, "\textbf{i}"]
              \& (A \sequoid \oc A) \sequoid I \arrow[r, "\passoc\inv"] \arrow[d, "\run"] \arrow[phantom, dr, "\textbf{j}"]
                \& A \sequoid (\oc A \tensor I) \arrow[r, "\id\sequoid\sym"] \arrow[d, "\id\sequoid\runit"] \arrow[phantom, dr, "\textbf{h}"]
                  \& A \sequoid (I \tensor \oc A) \arrow[d, "\id\sequoid\lunit"] \\
        \oc A \arrow[r, "\id"']
          \& \oc A \arrow[r, "\alpha"]
            \& A \sequoid \oc A \arrow[r, "\id"']
              \& A \sequoid \oc A \arrow[r, "\id"']
                \& A \sequoid \oc A \arrow[r, "\id"']
                  \& A \sequoid \oc A
      \end{tikzcd}
      \]
    \caption{
      \textbf{a} is diagram \eqref{secondProjectionDiagram}. \\[\baselineskip]
      \textbf{b} and \textbf{c} commute because $\sym$ is a natural transformation, \textbf{d} commutes because $\wk$ is a natural transformation and \textbf{e} commutes because $\passoc$ is a natural transformation.  \textbf{f} commutes because $\runit$ is a natural transformation. \\[\baselineskip]
      \textbf{g} and \textbf{h} commute by one of the coherence conditions for a symmetric monoidal category.  \textbf{i} commutes by one of the coherence conditions for $\wk$ in the definition of a sequoidal category and \textbf{j} commutes by one of the coherence conditions for $\passoc$ in the definition of a sequoidal category.
    }\label{hugeDiagram1}
  \end{SidewaysFigure}

  Now observe that the composite $\xi_A$ is running along the left hand side of Figure \ref{hugeDiagram1}, while $\id\sequoid\xi$ is running along the right.  Since we have $\alpha$ along the bottom, it follows by the uniqueness of $\fcoal{\cdot}$ that $\xi=\fcoal{\alpha}=\id_{\oc A}$.  
\end{proof}

Now we are ready to show that $\sigma\mapsto\oc \sigma$ respects composition.  Let $A,B,C$ be objects, let $\sigma$ be a morphism from $A$ to $B$ and let $\tau$ be a morphism from $B$ to $C$.   Using Lemma \ref{aFormulaForAlpha} and the definition of $\oc\sigma$, $\oc\tau$, we may construct a commutative diagram:
\[
  \begin{tikzcd}
    \oc A \arrow[r, "\mu"] \arrow[d, "\oc\sigma"']
      & \oc A \tensor \oc A \arrow[r, "\der\tensor\id"]
        & A \tensor \oc A \arrow[r, "\sigma\tensor\id"]
          & B \tensor \oc A \arrow[r, "\wk"] \arrow[d, dotted, "\id\tensor\oc\sigma"]
            & B \sequoid \oc A \arrow[d, "\id\sequoid\oc\sigma"] \\
    \oc B \arrow[r, "\mu"] \arrow[dd, "\oc \tau"']
      & \oc B \tensor \oc B \arrow[rr, "\der\tensor\id"]
        &
          & B \tensor \oc B \arrow[r, "\wk"] \arrow[d, "\tau\tensor\id"]
            & B \sequoid \oc B \\
    %
      &
        &
          & C \tensor \oc B \arrow[r, "\wk"] \arrow[d, dotted, "\id\tensor\oc\tau"']
            & C \sequoid \oc B \arrow[d, "\id\sequoid\oc\tau"] \\
    \oc C \arrow[r, "\mu"]
      & \oc C \tensor \oc C \arrow[rr, "\der\tensor\id"]
        &
          & C \tensor \oc C \arrow[r, "\wk"]
            & C \sequoid \oc C
  \end{tikzcd}
  \]
Here, the outermost (solid) shapes commute by the definition of $\oc\sigma$, $\oc\tau$ (after we have replaced $\alpha_B$, $\alpha_C$ with the composite from Lemma \ref{aFormulaForAlpha}).  The smaller squares on the right hand side commute because $\wk$ is a natural transformation.  Now observe that $\wk_{X,Y}=\comp{\pr_1}{\dec_{X,Y}}$ is the composition of epimorphisms, so is an epimorphism for all $X,Y$.  It follows that the two rectangles on the left commute as well.

Throwing away the right hand squares and adding some new arrows at the right, we arrive at the following commutative diagram:
\[
  \begin{tikzcd}
    \oc A \arrow[r, "\comp{(\sigma\tensor\id)}{\comp{(\der\tensor\id)}\mu}"] \arrow[d, "\oc\sigma"']
      &[72pt] B \tensor \oc A \arrow[r, "\tau\tensor\id"] \arrow[d, "\id\tensor\oc\sigma"']
        & C \tensor \oc A \arrow[d, "\id\tensor\oc\sigma"] \\
    \oc B \arrow[d, "\oc\tau"']
      & B \tensor\oc B \arrow[r, "\tau\tensor\id"] \arrow[d, "\tau\tensor\oc\tau"']
        & C \tensor \oc B \arrow[dl, "\id\tensor\oc\tau"] \\
    \oc C \arrow[r, "\comp{(\der\tensor\id)}{\mu}"]
      & C \tensor \oc C
        &
  \end{tikzcd}
  \]
We have just shown that the square on the left commutes.  The shapes on the right commute by inspection.  We now throw away the internal arrows and re-apply $\wk$ on the right hand side:
\[
  \begin{tikzcd}
    \oc A \arrow[r, "\comp{((\comp\tau\sigma)\tensor\id)}{\comp{(\der\tensor\id)}\mu}"] \arrow[d, "\oc\sigma"']
      &[72pt] C \tensor \oc A \arrow[d, "\id\tensor\oc\sigma"'] \arrow[r, "\wk"]
        & C \sequoid \oc A \arrow[d, "\id\sequoid\oc\sigma"] \\
    \oc B \arrow[d, "\oc\tau"']
      & C \tensor \oc B \arrow[d, "\id\tensor\oc\tau"'] \arrow[r, "\wk"]
        & \oc C \sequoid \oc B \arrow[d, "\id\sequoid\oc\tau"] \\
    \oc C \arrow[r, "\comp{(\der\tensor\id)}{\mu}"]
      & C \tensor \oc C \arrow[r, "\wk"]
        & C \sequoid\oc C
  \end{tikzcd}
  \]
By Lemma \ref{aFormulaForAlpha}, the composite along the bottom is equal to $\alpha_C$.  Therefore, by uniqueness of $\fcoal{\cdot}$, we have
\[
  \comp{\oc\tau}{\oc\sigma} = \fcoal{\comp{\wk}{\comp{((\comp\tau\sigma)\tensor\id)}{\comp{(\der\tensor\id)}\mu}}} = \oc(\comp\tau\sigma)
  \]
Therefore, $\oc$ is indeed a functor.

We now want to show that $\oc$ has the structure of a strong symmetric monoidal functor from $(\C,\times,1)$ to $(\C,\tensor,I)$.  The relevant morphisms are:
\[
  \int_{A,B}\from \oc A \tensor \oc B \to \oc (A \times B)
  \quad
  \dec^0\from I\to 1
  \]
By hypothesis, these are both isomorphisms.  We just need to show that the appropriate coherence diagrams commute.  That is, for any games $A,B,C$, we need to show that the following diagrams commute:
\[
  \begin{tikzcd}
    (\oc A \tensor \oc B) \tensor \oc C \arrow[r, "\assoc_{A,B,C}"] \arrow[d, "\int_{A,B}\tensor\id_{\oc C}"]
      & \oc A \tensor (\oc B \tensor \oc C) \arrow[d, "\id_{\oc A}\tensor\int_{B,C}"] \\
    \oc (A \times B) \tensor \oc C \arrow[d, "\int_{A\times B,C}"]
      & \oc A \tensor \oc(B \times C) \arrow[d, "\int_{A,B\times C}"] \\
    \oc ((A \times B) \times C) \arrow[r, "\oc\assoc_{\times,A,B,C}"]
      & \oc (A \times (B \times C))
  \end{tikzcd}
  \]

We first prove a small lemma, which gives us a simpler way to compute $\oc \sigma$ in the case that $\sigma$ is a morphism in $\C_s$.  

\begin{lemma}\label{ocStrict}
  Let $A,B$ be objects of $\C_s$ and let $\sigma$ be a morphism from $A$ to $B$ in $\C_s$.  Then the following diagram commutes:
  \[
    \begin{tikzcd}
      \oc A \arrow[r, "\alpha_A"] \arrow[d, "\oc \sigma"']
        & A \sequoid \oc A \arrow[r, "\sigma\sequoid\id"]
          & B \sequoid \oc A \arrow[d, "\id\sequoid\oc\sigma"] \\
      \oc B \arrow[rr, "\alpha_B"]
        &
          & B \sequoid \oc B
    \end{tikzcd}
    \]
\end{lemma}

\begin{proof}
  By the definition of $\oc \sigma$, we have the following commutative diagram:
  \[
    \begin{tikzcd}
      \oc A \arrow[r, "\mu_A"] \arrow[d, "\oc \sigma"']
        & \oc A \tensor \oc A \arrow[r, "\der\tensor\id"]
          & A \tensor \oc A \arrow[r, "\sigma\tensor\id"]
            & B \tensor \oc A \arrow[r, "\wk"]
              & B \sequoid \oc A \arrow[d, "\id_B\sequoid\oc\sigma"] \\
      \oc B \arrow[rrrr, "\alpha_B"]
        &
          &
            &
              & B \sequoid \oc B
    \end{tikzcd}
    \]
  Therefore, it will suffice to show that the following diagram (solid lines) commutes:
  \[
    \begin{tikzcd}
      \oc A \arrow[r, "\alpha_A"] \arrow[d, "\mu_A"']
        & A \sequoid \oc A \arrow[r, "\sigma\sequoid\id"]
          & B \sequoid \oc A \\
      \oc A \tensor \oc A \arrow[r, "\der\tensor\id"]
        & A \tensor \oc A \arrow[u, dotted, "\wk"] \arrow[r, "\sigma\tensor\id"]
          & B \tensor \oc A \arrow[u, "\wk"]
    \end{tikzcd}
    \]
  The left hand square commutes by Lemma \ref{aFormulaForAlpha}.  The right hand square commutes because $\wk$ is a natural transformation.
\end{proof}

To show that the first coherence diagram commutes, we define a composite $\eta_{A,B,C}$:
  \settowidth{\arrow}{\scriptsize$\id_{A\sequoid(\oc A\tensor\oc B)}\times (\id_B\sequoid\sym_{\oc B,\oc A})$}
  \begin{gather*}
    (\oc A \tensor \oc B) \tensor \oc C \constantwidthxrightarrow{\langle\id,\; \sym\rangle} ((\oc A \tensor \oc B) \tensor \oc C) \times (\oc C \tensor (\oc A \tensor \oc B)) \\
    \hspace{6pt}\cdots \constantwidthxrightarrow{((\comp{\dist\inv}{\kappa_{A,B}})\tensor\id)\times(\alpha_C\tensor\id)} (((A \times B) \sequoid (\oc A \tensor \oc B)) \tensor \oc C) \times ((C \sequoid \oc C) \tensor (\oc A \tensor \oc B)) \\
    \hspace{6pt}\cdots \constantwidthxrightarrow{\wk\times\wk} (((A \times B) \sequoid (\oc A \tensor \oc B)) \sequoid \oc C) \times ((C \sequoid \oc C) \sequoid (\oc A \tensor \oc B)) \\
    \hspace{6pt}\cdots \constantwidthxrightarrow{\passoc\inv\times\passoc\inv} ((A \times B) \sequoid ((\oc A \tensor \oc B) \tensor \oc C)) \times (C \sequoid (\oc C \tensor (\oc A \tensor \oc B))) \\
    \hspace{6pt}\cdots \constantwidthxrightarrow{\id\times(\id\sequoid\sym)} ((A \times B) \sequoid ((\oc A \tensor \oc B) \tensor \oc C)) \times (C \sequoid ((\oc A \tensor \oc B) \tensor \oc C))
  \end{gather*}

  Observe the similarity between the definition of $\eta_{A,B,C}$ and that of $\kappa_{A\times B,C}$.  Indeed, it may be easily verified that the following diagram commutes, using the definition of $\int_{A,B}$ as the anamorphism for $\comp{\dist\inv}{\kappa_{A,B}}$ and the fact that $\wk$, $\passoc$ and $\sym$ are natural transformations:
  \[
    \begin{tikzcd}
      ((\oc A \tensor \oc B) \tensor \oc C) \arrow[r, "\eta_{A,B,C}"] \arrow[d, "\int_{A,B}\tensor\id"']
        & ((A \times B) \sequoid ((\oc A \tensor \oc B) \tensor \oc C)) \times (C \sequoid ((\oc A \tensor \oc B) \tensor \oc C)) \arrow[d, "(\id\sequoid(\int\tensor\id))\times (\id\sequoid(\int\tensor\id))"] \\
      \oc (A \times B) \tensor \oc C \arrow[r, "\kappa_{A\times B,C}"]
        & ((A \times B) \sequoid (\oc (A \times B))) \times (C \sequoid (\oc (A \times B) \tensor \oc C))
    \end{tikzcd}
    \]

\begin{lemma}\label{assocCoherenceBigCommutes}
  The diagrams in Figure \ref{assocCoherenceBig} commute.
\end{lemma}
\begin{proof}
  First, observe the diagram in Figure \ref{ThisWorksForA}.  Setting, $X=A$, $Y=B$ and $Z=C$, this gives us diagram \eqref{Aexpansion} immediately.
\end{proof}

\begin{SidewaysFigure}
  \begin{equation}\label{Aexpansion}
    \begin{tikzcd}[ampersand replacement=\&]
      (\oc A \tensor \oc B) \tensor \oc C \arrow[r, "(\alpha_A\tensor\id)\tensor\id" yshift=0.4em] \arrow[d, "\assoc"']
        \& ((A \sequoid \oc A) \tensor \oc B) \tensor \oc C \arrow[r, "(\comp{\passoc\inv}{\wk})\tensor\id" yshift=0.4em]
          \& (A \sequoid (\oc A \tensor \oc B)) \tensor \oc C \arrow[r, "\comp{\passoc\inv}{\wk}" yshift=0.4em]
            \& A \sequoid ((\oc A \tensor \oc B) \tensor \oc C) \arrow[d, "\id\sequoid\assoc"] \\
      \oc A \tensor (\oc B \tensor \oc C) \arrow[r, "\alpha_A\tensor\id"]
        \& (A \sequoid \oc A) \tensor (\oc B \tensor \oc C) \arrow[r, "\wk"]
            \& (A \sequoid \oc A) \sequoid (\oc B \tensor \oc C) \arrow[r, "\passoc\inv"]
                \& A \sequoid (\oc A \tensor (\oc B \tensor \oc C))
    \end{tikzcd}\tag{\textbf{A}}
  \end{equation}\vspace{24pt}
  \begin{equation}\label{Bexpansion}
    \begin{tikzcd}[row sep=36pt, column sep=12pt, cramped, ampersand replacement=\&]
      (\oc A \tensor \oc B) \tensor \oc C \arrow[r, "\sym" yshift=0.4em] \arrow[d, "\assoc"']
        \& (\oc B \tensor \oc A) \tensor \oc C \arrow[r, "(\alpha_B\tensor\id)\tensor\id" yshift=0.4em]
          \& ((B \sequoid \oc B) \tensor \oc A) \tensor \oc C \arrow[r, "(\comp{\passoc\inv}{\wk})\tensor\id" yshift = 0.4em]
            \& (B \sequoid (\oc B \tensor \oc A)) \tensor \oc C \arrow[r, "\comp{\passoc\inv}{\wk}" yshift=0.4em]
              \& B \sequoid ((\oc B \tensor \oc A) \tensor \oc C) \arrow[r, "\id\sequoid(\sym\tensor\id)" yshift=0.4em]
                \& B \sequoid ((\oc A \tensor \oc B) \tensor \oc C) \arrow[d, "\id\sequoid\assoc"] \\
      \oc A \tensor (\oc B \tensor \oc C) \arrow[r, "\sym" yshift=0.4em]
        \& (\oc B \tensor \oc C) \tensor \oc A \arrow[r, "(\alpha_B\tensor\id)\tensor\id" yshift=0.4em]
          \& ((B \sequoid \oc B) \tensor \oc C) \tensor \oc A \arrow[r, "(\comp{\passoc\inv}{\wk})\tensor\id" yshift=0.4em]
            \& (B \sequoid (\oc B \tensor \oc C)) \tensor \oc A \arrow[r, "\comp{\passoc\inv}{\wk}" yshift=0.4em]
              \& B \sequoid ((\oc B \tensor \oc C) \tensor \oc A) \arrow[r, "\id\sequoid\sym" yshift=0.4em]
                \& B \sequoid (\oc A \tensor (\oc B \tensor \oc C))
    \end{tikzcd}\tag{\textbf{B}}
  \end{equation}\vspace{36pt}
  \begin{equation}\label{Cexpansion}
    \begin{tikzcd}[row sep=36pt, column sep=12pt, cramped, ampersand replacement=\&]
      (\oc A \tensor \oc B) \tensor \oc C \arrow[r, "\sym" yshift=0.4em] \arrow[d, "\assoc"']
        \& \oc C \tensor (\oc A \tensor \oc B) \arrow[r, "\alpha_C\tensor\id" yshift=0.4em]
          \& (C \sequoid \oc C) \tensor (\oc A \tensor \oc B) \arrow[r, "\wk" yshift=0.4em]
            \& (C \sequoid \oc C) \sequoid (\oc A \tensor \oc B) \arrow[r, "\passoc\inv" yshift=0.4em]
              \& C \sequoid (\oc C \tensor (\oc A \tensor \oc B)) \arrow[r, "\id\sequoid\sym" yshift=0.4em]
                \& C \sequoid ((\oc A \tensor \oc B) \tensor \oc C) \arrow[d, "\id\sequoid\assoc"] \\
      \oc A \tensor (\oc B \tensor \oc C) \arrow[r, "\comp{(\sym\tensor\id)}{\sym}" yshift=0.4em]
        \& (\oc C \tensor \oc B) \tensor \oc A \arrow[r, "(\alpha_C\tensor\id)\tensor\id" yshift=0.4em]
          \& ((C \sequoid \oc C) \tensor \oc B) \tensor \oc A \arrow[r, "(\comp{\passoc\inv}{\wk})\tensor\id" yshift=0.4em]
            \& (C \sequoid (\oc C \tensor \oc B)) \tensor \oc A \arrow[r, "\comp{\passoc\inv}{\wk}" yshift=0.4em]
              \& C \sequoid ((\oc C \tensor \oc B) \tensor \oc A) \arrow[r, "\id\sequoid(\comp{(\sym\tensor\id)}{\sym})" yshift=0.4em]
                \& C \sequoid (\oc A \tensor (\oc B \tensor \oc C))
    \end{tikzcd}\tag{\textbf{C}}
  \end{equation}\vspace{24pt}
  \caption{Lemma \ref{assocCoherenceBigCommutes} asserts that these diagrams commute.}\label{assocCoherenceBig}
\end{SidewaysFigure}

\begin{SidewaysFigure}
  \[
    \begin{tikzcd}[row sep=36pt, cramped, ampersand replacement=\&]
      (\oc X \tensor \oc Y) \tensor \oc Z \arrow[r, "(\alpha\tensor\id)\tensor\id" yshift=0.4em] \arrow[dd, "\assoc"']
      \arrow[phantom, ddr, "\textbf{a}"]
        \& ((X \sequoid \oc X) \tensor \oc Y) \tensor \oc Z \arrow[r, "\wk\tensor\id" yshift=0.4em] \arrow[dd, "\assoc"']
      \arrow[phantom, ddr, "\textbf{c}"]
          \& ((X \sequoid \oc X) \sequoid \oc Y) \tensor \oc Z \arrow[r, "\passoc\inv\tensor\id" yshift=0.4em] \arrow[d, "\wk"']
      \arrow[phantom, dr, "\textbf{b}"]
            \& (X \sequoid (\oc X \tensor \oc Y)) \tensor \oc Z \arrow[d, "\wk"]
              \& \\
      %
        \&
          \& ((X \sequoid \oc X) \sequoid \oc Y) \sequoid \oc Z \arrow[r, "\passoc\inv\sequoid\id" yshift=0.4em] \arrow[d, "\passoc\inv"]
      \arrow[phantom, drr, "\textbf{d}"]
            \& (X \sequoid (\oc X \tensor \oc Y)) \sequoid \oc Z \arrow[r, "\passoc\inv" yshift=0.4em]
              \& X \sequoid ((\oc X \tensor \oc Y) \tensor \oc Z) \arrow[d, "\id\sequoid\assoc"] \\
      \oc X \tensor (\oc Y \tensor \oc Z) \arrow[r, "\alpha_X\tensor\id"]
        \& (X \sequoid \oc X) \tensor (\oc Y \tensor \oc Z) \arrow[r, "\wk"]
          \& (X \sequoid \oc X) \sequoid (\oc Y \tensor \oc Z) \arrow[rr, "\passoc\inv"]
            \& 
              \& X \sequoid (\oc X \tensor (\oc Y \tensor \oc Z)
    \end{tikzcd}
    \]
  \caption{
    \textbf{a} commutes because $\assoc$ is a natural transformation.  \textbf{b} commutes because $\wk$ is a natural transformation. \\[\baselineskip]
    \textbf{c} commutes by the coherence condition for $\wk$.  \textbf{d} commutes by the coherence condition for $\passoc$.
  }\label{ThisWorksForA}
\end{SidewaysFigure}

%%
%% Bibliography
%%

%% Either use bibtex (recommended), 

\bibliography{bibliography}

%% .. or use the thebibliography environment explicitely

\end{document}
